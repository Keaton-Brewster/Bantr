{"ast":null,"code":"import _extends from \"/Users/timmereeestes/Desktop/Keaton/family_messaging/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/extends\";\nvar _jsxFileName = \"/Users/timmereeestes/Desktop/Keaton/family_messaging/client/src/CometChat/src/components/Messages/CometChatMessageThread/index.js\";\nimport React from \"react\";\n/** @jsxRuntime classic */\n\n/** @jsx jsx */\n\nimport { jsx } from \"@emotion/core\";\nimport PropTypes from \"prop-types\";\nimport { CometChat } from \"@cometchat-pro/chat\";\nimport { CometChatMessageList, CometChatMessageComposer, CometChatSenderTextMessageBubble, CometChatReceiverTextMessageBubble, CometChatSenderImageMessageBubble, CometChatReceiverImageMessageBubble, CometChatSenderFileMessageBubble, CometChatReceiverFileMessageBubble, CometChatSenderAudioMessageBubble, CometChatReceiverAudioMessageBubble, CometChatSenderVideoMessageBubble, CometChatReceiverVideoMessageBubble, CometChatSenderDirectCallBubble, CometChatReceiverDirectCallBubble, CometChatImageViewer } from \"../\";\nimport { CometChatSenderPollMessageBubble, CometChatReceiverPollMessageBubble, CometChatSenderStickerBubble, CometChatReceiverStickerMessageBubble, CometChatSenderDocumentBubble, CometChatReceiverDocumentBubble, CometChatSenderWhiteboardBubble, CometChatReceiverWhiteboardBubble } from \"../Extensions\";\nimport { CometChatContext } from \"../../../util/CometChatContext\";\nimport { checkMessageForExtensionsData } from \"../../../util/common\";\nimport * as enums from \"../../../util/enums.js\";\nimport { theme } from \"../../../resources/theme\";\nimport Translator from \"../../../resources/localization/translator\";\nimport { wrapperStyle, headerStyle, headerWrapperStyle, headerDetailStyle, headerTitleStyle, headerNameStyle, headerCloseStyle, messageContainerStyle, parentMessageStyle, messageSeparatorStyle, messageReplyStyle } from \"./style\";\nimport clearIcon from \"./resources/close.svg\";\n\nclass CometChatMessageThread extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.loggedInUser = null;\n\n    this.enableSendingOneOnOneMessage = () => {\n      this.context.FeatureRestriction.isOneOnOneChatEnabled().then(response => {\n        if (response !== this.state.enableSendingOneOnOneMessage) {\n          this.setState({\n            enableSendingOneOnOneMessage: response\n          });\n        }\n      }).catch(error => {\n        if (this.state.enableSendingOneOnOneMessage !== false) {\n          this.setState({\n            enableSendingOneOnOneMessage: false\n          });\n        }\n      });\n    };\n\n    this.enableSendingGroupMessage = () => {\n      this.context.FeatureRestriction.isGroupChatEnabled().then(response => {\n        if (response !== this.state.enableSendingGroupMessage) {\n          this.setState({\n            enableSendingGroupMessage: response\n          });\n        }\n      }).catch(error => {\n        if (this.state.enableSendingGroupMessage !== false) {\n          this.setState({\n            enableSendingGroupMessage: false\n          });\n        }\n      });\n    };\n\n    this.enableHideDeletedMessages = () => {\n      this.context.FeatureRestriction.isHideDeletedMessagesEnabled().then(response => {\n        if (response !== this.state.enableHideDeletedMessages) {\n          this.setState({\n            enableHideDeletedMessages: response\n          });\n        }\n      }).catch(error => {\n        if (this.state.enableHideDeletedMessages !== false) {\n          this.setState({\n            enableHideDeletedMessages: false\n          });\n        }\n      });\n    };\n\n    this.errorHandler = errorCode => {\n      this.toastRef.setError(errorCode);\n    };\n\n    this.parentMessageEdited = message => {\n      const parentMessage = { ...this.props.parentMessage\n      };\n\n      if (parentMessage.id === message.id) {\n        const newMessageObj = { ...message\n        };\n        this.setState({\n          parentMessage: newMessageObj\n        });\n      }\n    };\n\n    this.actionHandler = (action, messages) => {\n      switch (action) {\n        case enums.ACTIONS[\"CUSTOM_MESSAGE_RECEIVED\"]:\n        case enums.ACTIONS[\"MESSAGE_RECEIVED\"]:\n          {\n            const message = messages[0];\n\n            if (message.hasOwnProperty(\"parentMessageId\") && message.parentMessageId === this.state.parentMessage.id) {\n              const replyCount = this.state.parentMessage.hasOwnProperty(\"replyCount\") ? this.state.parentMessage.replyCount : 0;\n              const newReplyCount = replyCount + 1;\n              let messageObj = { ...this.state.parentMessage\n              };\n              let newMessageObj = Object.assign({}, messageObj, {\n                replyCount: newReplyCount\n              });\n              this.setState({\n                parentMessage: newMessageObj\n              });\n              this.smartReplyPreview(messages);\n              this.appendMessage(messages);\n            }\n          }\n          break;\n\n        case enums.ACTIONS[\"MESSAGE_COMPOSED\"]:\n          {\n            const replyCount = this.state.parentMessage.hasOwnProperty(\"replyCount\") ? this.state.parentMessage.replyCount : 0;\n            const newReplyCount = replyCount + 1;\n            let messageObj = { ...this.state.parentMessage\n            };\n            let newMessageObj = Object.assign({}, messageObj, {\n              replyCount: newReplyCount\n            });\n            this.setState({\n              parentMessage: newMessageObj\n            });\n            this.appendMessage(messages);\n            this.props.actionGenerated(enums.ACTIONS[\"THREAD_MESSAGE_COMPOSED\"], messages);\n          }\n          break;\n\n        case enums.ACTIONS[\"MESSAGE_SENT\"]:\n        case enums.ACTIONS[\"ERROR_IN_SENDING_MESSAGE\"]:\n          this.messageSent(messages);\n          this.props.actionGenerated(action, messages);\n          break;\n\n        case enums.ACTIONS[\"ON_MESSAGE_READ_DELIVERED\"]:\n          this.updateMessages(messages);\n          break;\n\n        case enums.ACTIONS[\"ON_MESSAGE_EDITED\"]:\n          this.updateMessages(messages);\n          break;\n\n        case \"messageFetched\":\n          this.prependMessages(messages);\n          break;\n\n        case enums.ACTIONS[\"ON_MESSAGE_DELETED\"]:\n          this.removeMessages(messages);\n          break;\n\n        case enums.ACTIONS[\"EDIT_MESSAGE\"]:\n          this.editMessage(messages);\n          break;\n\n        case enums.ACTIONS[\"MESSAGE_EDITED\"]:\n          this.messageEdited(messages);\n          break;\n\n        case enums.ACTIONS[\"CLEAR_EDIT_PREVIEW\"]:\n          this.clearEditPreview();\n          break;\n\n        case enums.ACTIONS[\"DELETE_MESSAGE\"]:\n          this.deleteMessage(messages);\n          break;\n\n        case enums.ACTIONS[\"REACT_TO_MESSAGE\"]:\n          this.reactToMessage(messages);\n          break;\n\n        case enums.ACTIONS[\"VIEW_ORIGINAL_IMAGE\"]:\n          this.toggleOriginalImageView(messages);\n          break;\n\n        default:\n          break;\n      }\n    };\n\n    this.toggleOriginalImageView = message => {\n      this.setState({\n        viewOriginalImage: message\n      });\n    };\n\n    this.messageSent = messages => {\n      const message = messages[0];\n      const messageList = [...this.state.messageList];\n      let messageKey = messageList.findIndex(m => m._id === message._id);\n\n      if (messageKey > -1) {\n        const newMessageObj = { ...message\n        };\n        messageList.splice(messageKey, 1, newMessageObj);\n        this.updateMessages(messageList);\n      }\n    };\n\n    this.editMessage = message => {\n      this.setState({\n        messageToBeEdited: message\n      });\n    };\n\n    this.messageEdited = message => {\n      const messageList = [...this.state.messageList];\n      let messageKey = messageList.findIndex(m => m.id === message.id);\n\n      if (messageKey > -1) {\n        const messageObj = messageList[messageKey];\n        const newMessageObj = { ...messageObj,\n          ...message\n        };\n        messageList.splice(messageKey, 1, newMessageObj);\n        this.updateMessages(messageList);\n\n        if (messageList.length - messageKey === 1) {\n          this.context.setLastMessage(newMessageObj);\n        }\n      }\n    };\n\n    this.clearEditPreview = () => {\n      this.setState({\n        messageToBeEdited: \"\"\n      });\n    };\n\n    this.deleteMessage = message => {\n      const messageId = message.id;\n      CometChat.deleteMessage(messageId).then(deletedMessage => {\n        this.removeMessages([deletedMessage]);\n        const messageList = [...this.state.messageList];\n        let messageKey = messageList.findIndex(m => m.id === message.id);\n\n        if (messageList.length - messageKey === 1 && !message.replyCount) {\n          this.context.setLastMessage(deletedMessage);\n        }\n      }).catch(error => this.errorHandler(\"SOMETHING_WRONG\"));\n    };\n\n    this.smartReplyPreview = messages => {\n      const message = messages[0];\n      const smartReplyData = checkMessageForExtensionsData(message, \"smart-reply\");\n\n      if (smartReplyData && smartReplyData.hasOwnProperty(\"error\") === false) {\n        this.setState({\n          replyPreview: message\n        });\n      } else {\n        this.setState({\n          replyPreview: null\n        });\n      }\n    };\n\n    this.appendMessage = message => {\n      let messages = [...this.state.messageList];\n      messages = messages.concat(message);\n      this.setState({\n        messageList: messages,\n        scrollToBottom: true\n      });\n    };\n\n    this.updateMessages = messages => {\n      this.setState({\n        messageList: messages\n      });\n    };\n\n    this.prependMessages = messages => {\n      const messageList = [...messages, ...this.state.messageList];\n      this.setState({\n        messageList: messageList,\n        scrollToBottom: false\n      });\n    };\n\n    this.removeMessages = messages => {\n      const deletedMessage = messages[0];\n      const messagelist = [...this.state.messageList];\n      let messageKey = messagelist.findIndex(message => message.id === deletedMessage.id);\n\n      if (messageKey > -1) {\n        console.log(\"this.state.enableHideDeletedMessages\", this.state.enableHideDeletedMessages);\n\n        if (this.state.enableHideDeletedMessages) {\n          messagelist.splice(messageKey, 1);\n        } else {\n          let messageObj = { ...messagelist[messageKey]\n          };\n          let newMessageObj = Object.assign({}, messageObj, deletedMessage);\n          messagelist.splice(messageKey, 1, newMessageObj);\n        }\n\n        this.setState({\n          messageList: messagelist,\n          scrollToBottom: false\n        });\n      }\n    };\n\n    this.getSenderMessageComponent = (message, key) => {\n      let component;\n\n      switch (message.type) {\n        case CometChat.MESSAGE_TYPE.TEXT:\n          component = jsx(CometChatSenderTextMessageBubble, _extends({\n            loggedInUser: this.loggedInUser,\n            key: key,\n            message: message,\n            actionGenerated: this.actionHandler\n          }, this.props, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 17\n            }\n          }));\n          break;\n\n        case CometChat.MESSAGE_TYPE.IMAGE:\n          component = jsx(CometChatSenderImageMessageBubble, _extends({\n            loggedInUser: this.loggedInUser,\n            key: key,\n            message: message,\n            actionGenerated: this.actionHandler\n          }, this.props, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 17\n            }\n          }));\n          break;\n\n        case CometChat.MESSAGE_TYPE.FILE:\n          component = jsx(CometChatSenderFileMessageBubble, _extends({\n            loggedInUser: this.loggedInUser,\n            key: key,\n            message: message,\n            actionGenerated: this.actionHandler\n          }, this.props, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 17\n            }\n          }));\n          break;\n\n        case CometChat.MESSAGE_TYPE.VIDEO:\n          component = jsx(CometChatSenderVideoMessageBubble, _extends({\n            loggedInUser: this.loggedInUser,\n            key: key,\n            message: message,\n            actionGenerated: this.actionHandler\n          }, this.props, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 17\n            }\n          }));\n          break;\n\n        case CometChat.MESSAGE_TYPE.AUDIO:\n          component = jsx(CometChatSenderAudioMessageBubble, _extends({\n            loggedInUser: this.loggedInUser,\n            key: key,\n            message: message,\n            actionGenerated: this.actionHandler\n          }, this.props, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 17\n            }\n          }));\n          break;\n\n        default:\n          break;\n      }\n\n      return component;\n    };\n\n    this.getReceiverMessageComponent = (message, key) => {\n      let component;\n\n      switch (message.type) {\n        case \"message\":\n        case CometChat.MESSAGE_TYPE.TEXT:\n          component = jsx(CometChatReceiverTextMessageBubble, _extends({\n            loggedInUser: this.loggedInUser,\n            key: key,\n            message: message,\n            actionGenerated: this.actionHandler\n          }, this.props, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 17\n            }\n          }));\n          break;\n\n        case CometChat.MESSAGE_TYPE.IMAGE:\n          component = jsx(CometChatReceiverImageMessageBubble, _extends({\n            loggedInUser: this.loggedInUser,\n            key: key,\n            message: message,\n            actionGenerated: this.actionHandler\n          }, this.props, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 17\n            }\n          }));\n          break;\n\n        case CometChat.MESSAGE_TYPE.FILE:\n          component = jsx(CometChatReceiverFileMessageBubble, _extends({\n            loggedInUser: this.loggedInUser,\n            key: key,\n            message: message,\n            actionGenerated: this.actionHandler\n          }, this.props, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 17\n            }\n          }));\n          break;\n\n        case CometChat.MESSAGE_TYPE.AUDIO:\n          component = jsx(CometChatReceiverAudioMessageBubble, _extends({\n            loggedInUser: this.loggedInUser,\n            key: key,\n            message: message,\n            actionGenerated: this.actionHandler\n          }, this.props, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 17\n            }\n          }));\n          break;\n\n        case CometChat.MESSAGE_TYPE.VIDEO:\n          component = jsx(CometChatReceiverVideoMessageBubble, _extends({\n            loggedInUser: this.loggedInUser,\n            key: key,\n            message: message,\n            actionGenerated: this.actionHandler\n          }, this.props, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 377,\n              columnNumber: 17\n            }\n          }));\n          break;\n\n        default:\n          break;\n      }\n\n      return component;\n    };\n\n    this.getSenderCustomMessageComponent = (message, key) => {\n      let component;\n\n      switch (message.type) {\n        case enums.CUSTOM_TYPE_POLL:\n          component = jsx(CometChatSenderPollMessageBubble, _extends({\n            loggedInUser: this.loggedInUser,\n            key: key,\n            message: message,\n            actionGenerated: this.props.actionGenerated\n          }, this.props, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 17\n            }\n          }));\n          break;\n\n        case enums.CUSTOM_TYPE_STICKER:\n          component = jsx(CometChatSenderStickerBubble, _extends({\n            loggedInUser: this.loggedInUser,\n            key: key,\n            message: message,\n            actionGenerated: this.props.actionGenerated\n          }, this.props, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 17\n            }\n          }));\n          break;\n\n        case enums.CUSTOM_TYPE_DOCUMENT:\n          component = jsx(CometChatSenderDocumentBubble, _extends({\n            loggedInUser: this.loggedInUser,\n            key: key,\n            message: message,\n            actionGenerated: this.props.actionGenerated\n          }, this.props, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 17\n            }\n          }));\n          break;\n\n        case enums.CUSTOM_TYPE_WHITEBOARD:\n          component = jsx(CometChatSenderWhiteboardBubble, _extends({\n            loggedInUser: this.loggedInUser,\n            key: key,\n            message: message,\n            actionGenerated: this.props.actionGenerated\n          }, this.props, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 400,\n              columnNumber: 17\n            }\n          }));\n          break;\n\n        case enums.CUSTOM_TYPE_MEETING:\n          component = jsx(CometChatSenderDirectCallBubble, _extends({\n            loggedInUser: this.loggedInUser,\n            key: key,\n            message: message,\n            actionGenerated: this.props.actionGenerated\n          }, this.props, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 17\n            }\n          }));\n          break;\n\n        default:\n          break;\n      }\n\n      return component;\n    };\n\n    this.getReceiverCustomMessageComponent = (message, key) => {\n      let component;\n\n      switch (message.type) {\n        case enums.CUSTOM_TYPE_POLL:\n          component = jsx(CometChatReceiverPollMessageBubble, _extends({\n            loggedInUser: this.loggedInUser,\n            key: key,\n            message: message,\n            actionGenerated: this.props.actionGenerated\n          }, this.props, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 17\n            }\n          }));\n          break;\n\n        case enums.CUSTOM_TYPE_STICKER:\n          component = jsx(CometChatReceiverStickerMessageBubble, _extends({\n            loggedInUser: this.loggedInUser,\n            key: key,\n            message: message,\n            actionGenerated: this.props.actionGenerated\n          }, this.props, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 17\n            }\n          }));\n          break;\n\n        case enums.CUSTOM_TYPE_DOCUMENT:\n          component = jsx(CometChatReceiverDocumentBubble, _extends({\n            loggedInUser: this.loggedInUser,\n            key: key,\n            message: message,\n            actionGenerated: this.props.actionGenerated\n          }, this.props, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 17\n            }\n          }));\n          break;\n\n        case enums.CUSTOM_TYPE_WHITEBOARD:\n          component = jsx(CometChatReceiverWhiteboardBubble, _extends({\n            loggedInUser: this.loggedInUser,\n            key: key,\n            message: message,\n            actionGenerated: this.props.actionGenerated\n          }, this.props, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 17\n            }\n          }));\n          break;\n\n        case enums.CUSTOM_TYPE_MEETING:\n          component = jsx(CometChatReceiverDirectCallBubble, _extends({\n            loggedInUser: this.loggedInUser,\n            key: key,\n            message: message\n          }, this.props, {\n            enableMessageReaction: this.state.enableMessageReaction,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 428,\n              columnNumber: 17\n            }\n          }));\n          break;\n\n        default:\n          break;\n      }\n\n      return component;\n    };\n\n    this.getParentMessageComponent = message => {\n      let component = null;\n      const key = 1;\n\n      switch (message.category) {\n        case CometChat.CATEGORY_MESSAGE:\n          if (this.loggedInUser.uid === message.sender.uid) {\n            component = this.getSenderMessageComponent(message, key);\n          } else {\n            component = this.getReceiverMessageComponent(message, key);\n          }\n\n          break;\n\n        case CometChat.CATEGORY_CUSTOM:\n          if (this.loggedInUser.uid === message.sender.uid) {\n            component = this.getSenderCustomMessageComponent(message, key);\n          } else {\n            component = this.getReceiverCustomMessageComponent(message, key);\n          }\n\n          break;\n\n        default:\n          break;\n      }\n\n      return component;\n    };\n\n    this.reactToMessage = message => {\n      this.setState({\n        messageToReact: message\n      });\n\n      if (this.composerRef) {\n        this.composerRef.toggleEmojiPicker();\n      }\n    };\n\n    this.state = {\n      messageList: [],\n      scrollToBottom: false,\n      replyCount: 0,\n      replyPreview: null,\n      messageToBeEdited: null,\n      parentMessage: props.parentMessage,\n      viewOriginalImage: false,\n      enableSendingOneOnOneMessage: false,\n      enableSendingGroupMessage: false,\n      enableHideDeletedMessages: false\n    };\n    this.composerRef = /*#__PURE__*/React.createRef();\n    this.toastRef = /*#__PURE__*/React.createRef();\n    this.loggedInUser = this.props.loggedInUser;\n  }\n\n  componentDidMount() {\n    CometChat.getLoggedinUser().then(user => this.loggedInUser = user).catch(error => this.errorHandler(\"SOMETHING_WRONG\"));\n    this.enableSendingOneOnOneMessage();\n    this.enableSendingGroupMessage();\n    this.enableHideDeletedMessages();\n  }\n\n  componentDidUpdate(prevProps) {\n    this.enableSendingOneOnOneMessage();\n    this.enableSendingGroupMessage();\n    this.enableHideDeletedMessages();\n\n    if (prevProps.parentMessage !== this.props.parentMessage) {\n      if (prevProps.parentMessage.id !== this.props.parentMessage.id) {\n        this.setState({\n          messageList: [],\n          scrollToBottom: true,\n          parentMessage: this.props.parentMessage\n        });\n      } else if (prevProps.parentMessage.data !== this.props.parentMessage.data) {\n        this.setState({\n          parentMessage: this.props.parentMessage\n        });\n      }\n    }\n  }\n\n  render() {\n    let parentMessage = this.getParentMessageComponent(this.state.parentMessage);\n    let seperator = jsx(\"div\", {\n      css: messageSeparatorStyle(this.props),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 4\n      }\n    }, jsx(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 5\n      }\n    }));\n\n    if (this.state.parentMessage.hasOwnProperty(\"replyCount\")) {\n      const replyCount = this.state.parentMessage.replyCount;\n      const replyText = replyCount === 1 ? `${replyCount} ${Translator.translate(\"REPLY\", this.props.lang)}` : `${replyCount} ${Translator.translate(\"REPLIES\", this.props.lang)}`;\n      seperator = jsx(\"div\", {\n        css: messageSeparatorStyle(this.context),\n        className: \"message__separator\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 5\n        }\n      }, jsx(\"span\", {\n        css: messageReplyStyle(),\n        className: \"message__replies\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 485,\n          columnNumber: 6\n        }\n      }, replyText), jsx(\"hr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 488,\n          columnNumber: 6\n        }\n      }));\n    }\n\n    let originalImageView = null;\n\n    if (this.state.viewOriginalImage) {\n      originalImageView = jsx(CometChatImageViewer, {\n        open: true,\n        close: () => this.toggleOriginalImageView(false),\n        message: this.state.viewOriginalImage,\n        lang: this.props.lang,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 495,\n          columnNumber: 24\n        }\n      });\n    }\n\n    let messageComposer = jsx(CometChatMessageComposer, {\n      ref: el => {\n        this.composerRef = el;\n      },\n      theme: this.props.theme,\n      lang: this.props.lang,\n      widgetsettings: this.props.widgetsettings,\n      parentMessageId: this.props.parentMessage.id,\n      messageToBeEdited: this.state.messageToBeEdited,\n      replyPreview: this.state.replyPreview,\n      messageToReact: this.state.messageToReact,\n      actionGenerated: this.actionHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 499,\n        columnNumber: 4\n      }\n    }); //if send messages feature is disabled\n\n    if (this.context.type === CometChat.ACTION_TYPE.TYPE_USER && this.state.enableSendingOneOnOneMessage === false || this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP && this.state.enableSendingGroupMessage === false) {\n      messageComposer = null;\n    }\n\n    return jsx(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 519,\n        columnNumber: 4\n      }\n    }, jsx(\"div\", {\n      css: wrapperStyle(this.context),\n      className: \"thread__chat\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 520,\n        columnNumber: 5\n      }\n    }, jsx(\"div\", {\n      css: headerStyle(this.context),\n      className: \"chat__header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 521,\n        columnNumber: 6\n      }\n    }, jsx(\"div\", {\n      css: headerWrapperStyle(),\n      className: \"header__wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 522,\n        columnNumber: 7\n      }\n    }, jsx(\"div\", {\n      css: headerDetailStyle(),\n      className: \"header__details\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 523,\n        columnNumber: 8\n      }\n    }, jsx(\"h6\", {\n      css: headerTitleStyle(),\n      className: \"header__title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 524,\n        columnNumber: 9\n      }\n    }, Translator.translate(\"THREAD\", this.props.lang)), jsx(\"span\", {\n      css: headerNameStyle(),\n      className: \"header__username\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 527,\n        columnNumber: 9\n      }\n    }, this.props.threadItem.name)), jsx(\"div\", {\n      css: headerCloseStyle(clearIcon, this.context),\n      className: \"header__close\",\n      onClick: () => this.props.actionGenerated(enums.ACTIONS[\"CLOSE_THREADED_MESSAGE\"]),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 531,\n        columnNumber: 8\n      }\n    }))), jsx(\"div\", {\n      css: messageContainerStyle(),\n      className: \"chat__message__container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 534,\n        columnNumber: 6\n      }\n    }, jsx(\"div\", {\n      css: parentMessageStyle(this.props.parentMessage),\n      className: \"parent__message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 535,\n        columnNumber: 7\n      }\n    }, parentMessage), seperator, jsx(CometChatMessageList, {\n      theme: this.props.theme,\n      messages: this.state.messageList,\n      item: this.props.threadItem,\n      type: this.props.threadType,\n      scrollToBottom: this.state.scrollToBottom,\n      config: this.props.config,\n      widgetsettings: this.props.widgetsettings,\n      parentMessageId: this.props.parentMessage.id,\n      lang: this.props.lang,\n      actionGenerated: this.actionHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 539,\n        columnNumber: 7\n      }\n    }), messageComposer)), originalImageView);\n  }\n\n} // Specifies the default values for props:\n\n\nCometChatMessageThread.contextType = CometChatContext;\nCometChatMessageThread.defaultProps = {\n  lang: Translator.getDefaultLanguage(),\n  theme: theme\n};\nCometChatMessageThread.propTypes = {\n  lang: PropTypes.string,\n  theme: PropTypes.object\n};\nexport { CometChatMessageThread };","map":{"version":3,"sources":["/Users/timmereeestes/Desktop/Keaton/family_messaging/client/src/CometChat/src/components/Messages/CometChatMessageThread/index.js"],"names":["React","jsx","PropTypes","CometChat","CometChatMessageList","CometChatMessageComposer","CometChatSenderTextMessageBubble","CometChatReceiverTextMessageBubble","CometChatSenderImageMessageBubble","CometChatReceiverImageMessageBubble","CometChatSenderFileMessageBubble","CometChatReceiverFileMessageBubble","CometChatSenderAudioMessageBubble","CometChatReceiverAudioMessageBubble","CometChatSenderVideoMessageBubble","CometChatReceiverVideoMessageBubble","CometChatSenderDirectCallBubble","CometChatReceiverDirectCallBubble","CometChatImageViewer","CometChatSenderPollMessageBubble","CometChatReceiverPollMessageBubble","CometChatSenderStickerBubble","CometChatReceiverStickerMessageBubble","CometChatSenderDocumentBubble","CometChatReceiverDocumentBubble","CometChatSenderWhiteboardBubble","CometChatReceiverWhiteboardBubble","CometChatContext","checkMessageForExtensionsData","enums","theme","Translator","wrapperStyle","headerStyle","headerWrapperStyle","headerDetailStyle","headerTitleStyle","headerNameStyle","headerCloseStyle","messageContainerStyle","parentMessageStyle","messageSeparatorStyle","messageReplyStyle","CometChatMessageThread","PureComponent","constructor","props","loggedInUser","enableSendingOneOnOneMessage","context","FeatureRestriction","isOneOnOneChatEnabled","then","response","state","setState","catch","error","enableSendingGroupMessage","isGroupChatEnabled","enableHideDeletedMessages","isHideDeletedMessagesEnabled","errorHandler","errorCode","toastRef","setError","parentMessageEdited","message","parentMessage","id","newMessageObj","actionHandler","action","messages","ACTIONS","hasOwnProperty","parentMessageId","replyCount","newReplyCount","messageObj","Object","assign","smartReplyPreview","appendMessage","actionGenerated","messageSent","updateMessages","prependMessages","removeMessages","editMessage","messageEdited","clearEditPreview","deleteMessage","reactToMessage","toggleOriginalImageView","viewOriginalImage","messageList","messageKey","findIndex","m","_id","splice","messageToBeEdited","length","setLastMessage","messageId","deletedMessage","smartReplyData","replyPreview","concat","scrollToBottom","messagelist","console","log","getSenderMessageComponent","key","component","type","MESSAGE_TYPE","TEXT","IMAGE","FILE","VIDEO","AUDIO","getReceiverMessageComponent","getSenderCustomMessageComponent","CUSTOM_TYPE_POLL","CUSTOM_TYPE_STICKER","CUSTOM_TYPE_DOCUMENT","CUSTOM_TYPE_WHITEBOARD","CUSTOM_TYPE_MEETING","getReceiverCustomMessageComponent","enableMessageReaction","getParentMessageComponent","category","CATEGORY_MESSAGE","uid","sender","CATEGORY_CUSTOM","messageToReact","composerRef","toggleEmojiPicker","createRef","componentDidMount","getLoggedinUser","user","componentDidUpdate","prevProps","data","render","seperator","replyText","translate","lang","originalImageView","messageComposer","el","widgetsettings","ACTION_TYPE","TYPE_USER","TYPE_GROUP","threadItem","name","clearIcon","threadType","config","contextType","defaultProps","getDefaultLanguage","propTypes","string","object"],"mappings":"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","sourcesContent":["import React from \"react\";\n/** @jsxRuntime classic */\n/** @jsx jsx */\nimport { jsx } from \"@emotion/core\";\nimport PropTypes from \"prop-types\";\nimport { CometChat } from \"@cometchat-pro/chat\";\n\nimport { \n\tCometChatMessageList, CometChatMessageComposer,\n\tCometChatSenderTextMessageBubble, CometChatReceiverTextMessageBubble,\n\tCometChatSenderImageMessageBubble, CometChatReceiverImageMessageBubble,\n\tCometChatSenderFileMessageBubble, CometChatReceiverFileMessageBubble,\n\tCometChatSenderAudioMessageBubble, CometChatReceiverAudioMessageBubble,\n\tCometChatSenderVideoMessageBubble, CometChatReceiverVideoMessageBubble,\n\tCometChatSenderDirectCallBubble, CometChatReceiverDirectCallBubble,\n\tCometChatImageViewer\n} from \"../\";\n\nimport {\n\tCometChatSenderPollMessageBubble, CometChatReceiverPollMessageBubble,\n\tCometChatSenderStickerBubble, CometChatReceiverStickerMessageBubble,\n\tCometChatSenderDocumentBubble, CometChatReceiverDocumentBubble,\n\tCometChatSenderWhiteboardBubble, CometChatReceiverWhiteboardBubble,\n} from \"../Extensions\";\n\nimport { CometChatContext } from \"../../../util/CometChatContext\";\nimport { checkMessageForExtensionsData } from \"../../../util/common\";\nimport * as enums from \"../../../util/enums.js\";\n\nimport { theme } from \"../../../resources/theme\";\nimport Translator from \"../../../resources/localization/translator\";\n\nimport {\n\twrapperStyle,\n\theaderStyle,\n\theaderWrapperStyle,\n\theaderDetailStyle,\n\theaderTitleStyle,\n\theaderNameStyle,\n\theaderCloseStyle,\n\tmessageContainerStyle,\n\tparentMessageStyle,\n\tmessageSeparatorStyle,\n\tmessageReplyStyle,\n} from \"./style\";\n\nimport clearIcon from \"./resources/close.svg\";\n\nclass CometChatMessageThread extends React.PureComponent {\n\tloggedInUser = null;\n\tstatic contextType = CometChatContext;\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tmessageList: [],\n\t\t\tscrollToBottom: false,\n\t\t\treplyCount: 0,\n\t\t\treplyPreview: null,\n\t\t\tmessageToBeEdited: null,\n\t\t\tparentMessage: props.parentMessage,\n\t\t\tviewOriginalImage: false,\n\t\t\tenableSendingOneOnOneMessage: false,\n\t\t\tenableSendingGroupMessage: false,\n\t\t\tenableHideDeletedMessages: false,\n\t\t};\n\n\t\tthis.composerRef = React.createRef();\n\t\tthis.toastRef = React.createRef();\n\n\t\tthis.loggedInUser = this.props.loggedInUser;\n\t}\n\n\tcomponentDidMount() {\n\t\tCometChat.getLoggedinUser()\n\t\t\t.then(user => (this.loggedInUser = user))\n\t\t\t.catch(error => this.errorHandler(\"SOMETHING_WRONG\"));\n\n\t\tthis.enableSendingOneOnOneMessage();\n\t\tthis.enableSendingGroupMessage();\n\t\tthis.enableHideDeletedMessages();\n\t}\n\n\tcomponentDidUpdate(prevProps) {\n\t\tthis.enableSendingOneOnOneMessage();\n\t\tthis.enableSendingGroupMessage();\n\t\tthis.enableHideDeletedMessages();\n\n\t\tif (prevProps.parentMessage !== this.props.parentMessage) {\n\t\t\tif (prevProps.parentMessage.id !== this.props.parentMessage.id) {\n\t\t\t\tthis.setState({ messageList: [], scrollToBottom: true, parentMessage: this.props.parentMessage });\n\t\t\t} else if (prevProps.parentMessage.data !== this.props.parentMessage.data) {\n\t\t\t\tthis.setState({ parentMessage: this.props.parentMessage });\n\t\t\t}\n\t\t}\n\t}\n\n\tenableSendingOneOnOneMessage = () => {\n\t\tthis.context.FeatureRestriction.isOneOnOneChatEnabled()\n\t\t\t.then(response => {\n\t\t\t\tif (response !== this.state.enableSendingOneOnOneMessage) {\n\t\t\t\t\tthis.setState({ enableSendingOneOnOneMessage: response });\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (this.state.enableSendingOneOnOneMessage !== false) {\n\t\t\t\t\tthis.setState({ enableSendingOneOnOneMessage: false });\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\tenableSendingGroupMessage = () => {\n\t\tthis.context.FeatureRestriction.isGroupChatEnabled()\n\t\t\t.then(response => {\n\t\t\t\tif (response !== this.state.enableSendingGroupMessage) {\n\t\t\t\t\tthis.setState({ enableSendingGroupMessage: response });\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (this.state.enableSendingGroupMessage !== false) {\n\t\t\t\t\tthis.setState({ enableSendingGroupMessage: false });\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\tenableHideDeletedMessages = () => {\n\t\tthis.context.FeatureRestriction.isHideDeletedMessagesEnabled()\n\t\t\t.then(response => {\n\t\t\t\tif (response !== this.state.enableHideDeletedMessages) {\n\t\t\t\t\tthis.setState({ enableHideDeletedMessages: response });\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (this.state.enableHideDeletedMessages !== false) {\n\t\t\t\t\tthis.setState({ enableHideDeletedMessages: false });\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\terrorHandler = errorCode => {\n\t\tthis.toastRef.setError(errorCode);\n\t};\n\n\tparentMessageEdited = message => {\n\t\tconst parentMessage = { ...this.props.parentMessage };\n\n\t\tif (parentMessage.id === message.id) {\n\t\t\tconst newMessageObj = { ...message };\n\t\t\tthis.setState({ parentMessage: newMessageObj });\n\t\t}\n\t};\n\n\tactionHandler = (action, messages) => {\n\t\tswitch (action) {\n\t\t\tcase enums.ACTIONS[\"CUSTOM_MESSAGE_RECEIVED\"]:\n\t\t\tcase enums.ACTIONS[\"MESSAGE_RECEIVED\"]:\n\t\t\t\t{\n\t\t\t\t\tconst message = messages[0];\n\t\t\t\t\tif (message.hasOwnProperty(\"parentMessageId\") && message.parentMessageId === this.state.parentMessage.id) {\n\t\t\t\t\t\tconst replyCount = this.state.parentMessage.hasOwnProperty(\"replyCount\") ? this.state.parentMessage.replyCount : 0;\n\t\t\t\t\t\tconst newReplyCount = replyCount + 1;\n\n\t\t\t\t\t\tlet messageObj = { ...this.state.parentMessage };\n\t\t\t\t\t\tlet newMessageObj = Object.assign({}, messageObj, { replyCount: newReplyCount });\n\t\t\t\t\t\tthis.setState({ parentMessage: newMessageObj });\n\n\t\t\t\t\t\tthis.smartReplyPreview(messages);\n\t\t\t\t\t\tthis.appendMessage(messages);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase enums.ACTIONS[\"MESSAGE_COMPOSED\"]:\n\t\t\t\t{\n\t\t\t\t\tconst replyCount = this.state.parentMessage.hasOwnProperty(\"replyCount\") ? this.state.parentMessage.replyCount : 0;\n\t\t\t\t\tconst newReplyCount = replyCount + 1;\n\n\t\t\t\t\tlet messageObj = { ...this.state.parentMessage };\n\t\t\t\t\tlet newMessageObj = Object.assign({}, messageObj, { replyCount: newReplyCount });\n\t\t\t\t\tthis.setState({ parentMessage: newMessageObj });\n\n\t\t\t\t\tthis.appendMessage(messages);\n\t\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"THREAD_MESSAGE_COMPOSED\"], messages);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase enums.ACTIONS[\"MESSAGE_SENT\"]:\n\t\t\tcase enums.ACTIONS[\"ERROR_IN_SENDING_MESSAGE\"]:\n\t\t\t\tthis.messageSent(messages);\n\t\t\t\tthis.props.actionGenerated(action, messages);\n\t\t\t\tbreak;\n\t\t\tcase enums.ACTIONS[\"ON_MESSAGE_READ_DELIVERED\"]:\n\t\t\t\tthis.updateMessages(messages);\n\t\t\t\tbreak;\n\t\t\tcase enums.ACTIONS[\"ON_MESSAGE_EDITED\"]:\n\t\t\t\tthis.updateMessages(messages);\n\t\t\t\tbreak;\n\t\t\tcase \"messageFetched\":\n\t\t\t\tthis.prependMessages(messages);\n\t\t\t\tbreak;\n\t\t\tcase enums.ACTIONS[\"ON_MESSAGE_DELETED\"]:\n\t\t\t\tthis.removeMessages(messages);\n\t\t\t\tbreak;\n\t\t\tcase enums.ACTIONS[\"EDIT_MESSAGE\"]:\n\t\t\t\tthis.editMessage(messages);\n\t\t\t\tbreak;\n\t\t\tcase enums.ACTIONS[\"MESSAGE_EDITED\"]:\n\t\t\t\tthis.messageEdited(messages);\n\t\t\t\tbreak;\n\t\t\tcase enums.ACTIONS[\"CLEAR_EDIT_PREVIEW\"]:\n\t\t\t\tthis.clearEditPreview();\n\t\t\t\tbreak;\n\t\t\tcase enums.ACTIONS[\"DELETE_MESSAGE\"]:\n\t\t\t\tthis.deleteMessage(messages);\n\t\t\t\tbreak;\n\t\t\tcase enums.ACTIONS[\"REACT_TO_MESSAGE\"]:\n\t\t\t\tthis.reactToMessage(messages);\n\t\t\t\tbreak;\n\t\t\tcase enums.ACTIONS[\"VIEW_ORIGINAL_IMAGE\"]:\n\t\t\t\tthis.toggleOriginalImageView(messages);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\ttoggleOriginalImageView = message => {\n\t\tthis.setState({ viewOriginalImage: message });\n\t};\n\n\tmessageSent = messages => {\n\t\tconst message = messages[0];\n\t\tconst messageList = [...this.state.messageList];\n\t\tlet messageKey = messageList.findIndex(m => m._id === message._id);\n\t\tif (messageKey > -1) {\n\t\t\tconst newMessageObj = { ...message };\n\n\t\t\tmessageList.splice(messageKey, 1, newMessageObj);\n\t\t\tthis.updateMessages(messageList);\n\t\t}\n\t};\n\n\teditMessage = message => {\n\t\tthis.setState({ messageToBeEdited: message });\n\t};\n\n\tmessageEdited = message => {\n\t\tconst messageList = [...this.state.messageList];\n\t\tlet messageKey = messageList.findIndex(m => m.id === message.id);\n\t\tif (messageKey > -1) {\n\t\t\tconst messageObj = messageList[messageKey];\n\n\t\t\tconst newMessageObj = { ...messageObj, ...message };\n\n\t\t\tmessageList.splice(messageKey, 1, newMessageObj);\n\t\t\tthis.updateMessages(messageList);\n\n\t\t\tif (messageList.length - messageKey === 1) {\n\t\t\t\tthis.context.setLastMessage(newMessageObj);\n\t\t\t}\n\t\t}\n\t};\n\n\tclearEditPreview = () => {\n\t\tthis.setState({ messageToBeEdited: \"\" });\n\t};\n\n\tdeleteMessage = message => {\n\t\t\n\t\tconst messageId = message.id;\n\t\tCometChat.deleteMessage(messageId)\n\t\t\t.then(deletedMessage => {\n\t\t\t\tthis.removeMessages([deletedMessage]);\n\n\t\t\t\tconst messageList = [...this.state.messageList];\n\t\t\t\tlet messageKey = messageList.findIndex(m => m.id === message.id);\n\n\t\t\t\tif (messageList.length - messageKey === 1 && !message.replyCount) {\n\t\t\t\t\tthis.context.setLastMessage(deletedMessage);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => this.errorHandler(\"SOMETHING_WRONG\"));\n\t};\n\n\tsmartReplyPreview = messages => {\n\t\tconst message = messages[0];\n\n\t\tconst smartReplyData = checkMessageForExtensionsData(message, \"smart-reply\");\n\t\tif (smartReplyData && smartReplyData.hasOwnProperty(\"error\") === false) {\n\t\t\tthis.setState({ replyPreview: message });\n\t\t} else {\n\t\t\tthis.setState({ replyPreview: null });\n\t\t}\n\t};\n\n\t//message is received or composed & sent\n\tappendMessage = message => {\n\t\tlet messages = [...this.state.messageList];\n\t\tmessages = messages.concat(message);\n\t\tthis.setState({ messageList: messages, scrollToBottom: true });\n\t};\n\n\t//message status is updated\n\tupdateMessages = messages => {\n\t\tthis.setState({ messageList: messages });\n\t};\n\n\t//messages are fetched from backend\n\tprependMessages = messages => {\n\t\tconst messageList = [...messages, ...this.state.messageList];\n\t\tthis.setState({ messageList: messageList, scrollToBottom: false });\n\t};\n\n\t//messages are deleted\n\tremoveMessages = messages => {\n\t\tconst deletedMessage = messages[0];\n\t\tconst messagelist = [...this.state.messageList];\n\n\t\tlet messageKey = messagelist.findIndex(message => message.id === deletedMessage.id);\n\t\tif (messageKey > -1) {\n\t\t\tconsole.log(\"this.state.enableHideDeletedMessages\", this.state.enableHideDeletedMessages);\n\t\t\tif (this.state.enableHideDeletedMessages) {\n\t\t\t\tmessagelist.splice(messageKey, 1);\n\t\t\t} else {\n\t\t\t\tlet messageObj = { ...messagelist[messageKey] };\n\t\t\t\tlet newMessageObj = Object.assign({}, messageObj, deletedMessage);\n\t\t\t\tmessagelist.splice(messageKey, 1, newMessageObj);\n\t\t\t}\n\n\t\t\tthis.setState({ messageList: messagelist, scrollToBottom: false });\n\t\t}\n\t};\n\n\tgetSenderMessageComponent = (message, key) => {\n\t\tlet component;\n\n\t\tswitch (message.type) {\n\t\t\tcase CometChat.MESSAGE_TYPE.TEXT:\n\t\t\t\tcomponent = <CometChatSenderTextMessageBubble loggedInUser={this.loggedInUser} key={key} message={message} actionGenerated={this.actionHandler} {...this.props} />;\n\t\t\t\tbreak;\n\t\t\tcase CometChat.MESSAGE_TYPE.IMAGE:\n\t\t\t\tcomponent = <CometChatSenderImageMessageBubble loggedInUser={this.loggedInUser} key={key} message={message} actionGenerated={this.actionHandler} {...this.props} />;\n\t\t\t\tbreak;\n\t\t\tcase CometChat.MESSAGE_TYPE.FILE:\n\t\t\t\tcomponent = <CometChatSenderFileMessageBubble loggedInUser={this.loggedInUser} key={key} message={message} actionGenerated={this.actionHandler} {...this.props} />;\n\t\t\t\tbreak;\n\t\t\tcase CometChat.MESSAGE_TYPE.VIDEO:\n\t\t\t\tcomponent = <CometChatSenderVideoMessageBubble loggedInUser={this.loggedInUser} key={key} message={message} actionGenerated={this.actionHandler} {...this.props} />;\n\t\t\t\tbreak;\n\t\t\tcase CometChat.MESSAGE_TYPE.AUDIO:\n\t\t\t\tcomponent = <CometChatSenderAudioMessageBubble loggedInUser={this.loggedInUser} key={key} message={message} actionGenerated={this.actionHandler} {...this.props} />;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn component;\n\t};\n\n\tgetReceiverMessageComponent = (message, key) => {\n\t\tlet component;\n\n\t\tswitch (message.type) {\n\t\t\tcase \"message\":\n\t\t\tcase CometChat.MESSAGE_TYPE.TEXT:\n\t\t\t\tcomponent = <CometChatReceiverTextMessageBubble loggedInUser={this.loggedInUser} key={key} message={message} actionGenerated={this.actionHandler} {...this.props} />;\n\t\t\t\tbreak;\n\t\t\tcase CometChat.MESSAGE_TYPE.IMAGE:\n\t\t\t\tcomponent = <CometChatReceiverImageMessageBubble loggedInUser={this.loggedInUser} key={key} message={message} actionGenerated={this.actionHandler} {...this.props} />;\n\t\t\t\tbreak;\n\t\t\tcase CometChat.MESSAGE_TYPE.FILE:\n\t\t\t\tcomponent = <CometChatReceiverFileMessageBubble loggedInUser={this.loggedInUser} key={key} message={message} actionGenerated={this.actionHandler} {...this.props} />;\n\t\t\t\tbreak;\n\t\t\tcase CometChat.MESSAGE_TYPE.AUDIO:\n\t\t\t\tcomponent = <CometChatReceiverAudioMessageBubble loggedInUser={this.loggedInUser} key={key} message={message} actionGenerated={this.actionHandler} {...this.props} />;\n\t\t\t\tbreak;\n\t\t\tcase CometChat.MESSAGE_TYPE.VIDEO:\n\t\t\t\tcomponent = <CometChatReceiverVideoMessageBubble loggedInUser={this.loggedInUser} key={key} message={message} actionGenerated={this.actionHandler} {...this.props} />;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn component;\n\t};\n\n\tgetSenderCustomMessageComponent = (message, key) => {\n\t\tlet component;\n\n\t\tswitch (message.type) {\n\t\t\tcase enums.CUSTOM_TYPE_POLL:\n\t\t\t\tcomponent = <CometChatSenderPollMessageBubble loggedInUser={this.loggedInUser} key={key} message={message} actionGenerated={this.props.actionGenerated} {...this.props} />;\n\t\t\t\tbreak;\n\t\t\tcase enums.CUSTOM_TYPE_STICKER:\n\t\t\t\tcomponent = <CometChatSenderStickerBubble loggedInUser={this.loggedInUser} key={key} message={message} actionGenerated={this.props.actionGenerated} {...this.props} />;\n\t\t\t\tbreak;\n\t\t\tcase enums.CUSTOM_TYPE_DOCUMENT:\n\t\t\t\tcomponent = <CometChatSenderDocumentBubble loggedInUser={this.loggedInUser} key={key} message={message} actionGenerated={this.props.actionGenerated} {...this.props} />;\n\t\t\t\tbreak;\n\t\t\tcase enums.CUSTOM_TYPE_WHITEBOARD:\n\t\t\t\tcomponent = <CometChatSenderWhiteboardBubble loggedInUser={this.loggedInUser} key={key} message={message} actionGenerated={this.props.actionGenerated} {...this.props} />;\n\t\t\t\tbreak;\n\t\t\tcase enums.CUSTOM_TYPE_MEETING:\n\t\t\t\tcomponent = <CometChatSenderDirectCallBubble loggedInUser={this.loggedInUser} key={key} message={message} actionGenerated={this.props.actionGenerated} {...this.props} />;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn component;\n\t};\n\n\tgetReceiverCustomMessageComponent = (message, key) => {\n\t\tlet component;\n\t\tswitch (message.type) {\n\t\t\tcase enums.CUSTOM_TYPE_POLL:\n\t\t\t\tcomponent = <CometChatReceiverPollMessageBubble loggedInUser={this.loggedInUser} key={key} message={message} actionGenerated={this.props.actionGenerated} {...this.props} />;\n\t\t\t\tbreak;\n\t\t\tcase enums.CUSTOM_TYPE_STICKER:\n\t\t\t\tcomponent = <CometChatReceiverStickerMessageBubble loggedInUser={this.loggedInUser} key={key} message={message} actionGenerated={this.props.actionGenerated} {...this.props} />;\n\t\t\t\tbreak;\n\t\t\tcase enums.CUSTOM_TYPE_DOCUMENT:\n\t\t\t\tcomponent = <CometChatReceiverDocumentBubble loggedInUser={this.loggedInUser} key={key} message={message} actionGenerated={this.props.actionGenerated} {...this.props} />;\n\t\t\t\tbreak;\n\t\t\tcase enums.CUSTOM_TYPE_WHITEBOARD:\n\t\t\t\tcomponent = <CometChatReceiverWhiteboardBubble loggedInUser={this.loggedInUser} key={key} message={message} actionGenerated={this.props.actionGenerated} {...this.props} />;\n\t\t\t\tbreak;\n\t\t\tcase enums.CUSTOM_TYPE_MEETING:\n\t\t\t\tcomponent = <CometChatReceiverDirectCallBubble loggedInUser={this.loggedInUser} key={key} message={message} {...this.props} enableMessageReaction={this.state.enableMessageReaction} />;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn component;\n\t};\n\n\tgetParentMessageComponent = message => {\n\t\tlet component = null;\n\t\tconst key = 1;\n\n\t\tswitch (message.category) {\n\t\t\tcase CometChat.CATEGORY_MESSAGE:\n\t\t\t\tif (this.loggedInUser.uid === message.sender.uid) {\n\t\t\t\t\tcomponent = this.getSenderMessageComponent(message, key);\n\t\t\t\t} else {\n\t\t\t\t\tcomponent = this.getReceiverMessageComponent(message, key);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase CometChat.CATEGORY_CUSTOM:\n\t\t\t\tif (this.loggedInUser.uid === message.sender.uid) {\n\t\t\t\t\tcomponent = this.getSenderCustomMessageComponent(message, key);\n\t\t\t\t} else {\n\t\t\t\t\tcomponent = this.getReceiverCustomMessageComponent(message, key);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn component;\n\t};\n\n\treactToMessage = message => {\n\t\tthis.setState({ messageToReact: message });\n\n\t\tif (this.composerRef) {\n\t\t\tthis.composerRef.toggleEmojiPicker();\n\t\t}\n\t};\n\n\trender() {\n\t\tlet parentMessage = this.getParentMessageComponent(this.state.parentMessage);\n\n\t\tlet seperator = (\n\t\t\t<div css={messageSeparatorStyle(this.props)}>\n\t\t\t\t<hr />\n\t\t\t</div>\n\t\t);\n\t\tif (this.state.parentMessage.hasOwnProperty(\"replyCount\")) {\n\t\t\tconst replyCount = this.state.parentMessage.replyCount;\n\t\t\tconst replyText = replyCount === 1 ? `${replyCount} ${Translator.translate(\"REPLY\", this.props.lang)}` : `${replyCount} ${Translator.translate(\"REPLIES\", this.props.lang)}`;\n\n\t\t\tseperator = (\n\t\t\t\t<div css={messageSeparatorStyle(this.context)} className=\"message__separator\">\n\t\t\t\t\t<span css={messageReplyStyle()} className=\"message__replies\">\n\t\t\t\t\t\t{replyText}\n\t\t\t\t\t</span>\n\t\t\t\t\t<hr />\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tlet originalImageView = null;\n\t\tif (this.state.viewOriginalImage) {\n\t\t\toriginalImageView = <CometChatImageViewer open={true} close={() => this.toggleOriginalImageView(false)} message={this.state.viewOriginalImage} lang={this.props.lang} />;\n\t\t}\n\n\t\tlet messageComposer = (\n\t\t\t<CometChatMessageComposer\n\t\t\t\tref={el => {\n\t\t\t\t\tthis.composerRef = el;\n\t\t\t\t}}\n\t\t\t\ttheme={this.props.theme}\n\t\t\t\tlang={this.props.lang}\n\t\t\t\twidgetsettings={this.props.widgetsettings}\n\t\t\t\tparentMessageId={this.props.parentMessage.id}\n\t\t\t\tmessageToBeEdited={this.state.messageToBeEdited}\n\t\t\t\treplyPreview={this.state.replyPreview}\n\t\t\t\tmessageToReact={this.state.messageToReact}\n\t\t\t\tactionGenerated={this.actionHandler} />\n\t\t);\n\n\t\t//if send messages feature is disabled\n\t\tif ((this.context.type === CometChat.ACTION_TYPE.TYPE_USER && this.state.enableSendingOneOnOneMessage === false) || (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP && this.state.enableSendingGroupMessage === false)) {\n\t\t\tmessageComposer = null;\n\t\t}\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div css={wrapperStyle(this.context)} className=\"thread__chat\">\n\t\t\t\t\t<div css={headerStyle(this.context)} className=\"chat__header\">\n\t\t\t\t\t\t<div css={headerWrapperStyle()} className=\"header__wrapper\">\n\t\t\t\t\t\t\t<div css={headerDetailStyle()} className=\"header__details\">\n\t\t\t\t\t\t\t\t<h6 css={headerTitleStyle()} className=\"header__title\">\n\t\t\t\t\t\t\t\t\t{Translator.translate(\"THREAD\", this.props.lang)}\n\t\t\t\t\t\t\t\t</h6>\n\t\t\t\t\t\t\t\t<span css={headerNameStyle()} className=\"header__username\">\n\t\t\t\t\t\t\t\t\t{this.props.threadItem.name}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div css={headerCloseStyle(clearIcon, this.context)} className=\"header__close\" onClick={() => this.props.actionGenerated(enums.ACTIONS[\"CLOSE_THREADED_MESSAGE\"])}></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div css={messageContainerStyle()} className=\"chat__message__container\">\n\t\t\t\t\t\t<div css={parentMessageStyle(this.props.parentMessage)} className=\"parent__message\">\n\t\t\t\t\t\t\t{parentMessage}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{seperator}\n\t\t\t\t\t\t<CometChatMessageList\n\t\t\t\t\t\t\ttheme={this.props.theme}\n\t\t\t\t\t\t\tmessages={this.state.messageList}\n\t\t\t\t\t\t\titem={this.props.threadItem}\n\t\t\t\t\t\t\ttype={this.props.threadType}\n\t\t\t\t\t\t\tscrollToBottom={this.state.scrollToBottom}\n\t\t\t\t\t\t\tconfig={this.props.config}\n\t\t\t\t\t\t\twidgetsettings={this.props.widgetsettings}\n\t\t\t\t\t\t\tparentMessageId={this.props.parentMessage.id}\n\t\t\t\t\t\t\tlang={this.props.lang}\n\t\t\t\t\t\t\tactionGenerated={this.actionHandler} />\n\t\t\t\t\t\t{messageComposer}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{originalImageView}\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\n// Specifies the default values for props:\nCometChatMessageThread.defaultProps = {\n\tlang: Translator.getDefaultLanguage(),\n\ttheme: theme\n};\n\nCometChatMessageThread.propTypes = {\n\tlang: PropTypes.string,\n\ttheme: PropTypes.object\n}\n\nexport { CometChatMessageThread };"]},"metadata":{},"sourceType":"module"}