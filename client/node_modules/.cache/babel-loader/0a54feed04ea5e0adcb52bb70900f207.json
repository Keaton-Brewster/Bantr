{"ast":null,"code":"var _jsxFileName = \"/Users/timmereeestes/Desktop/Keaton/family_messaging/client/src/utils/ConvorsationProvider.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { Spinner } from \"react-bootstrap\";\nimport API from \"./API\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst conversationContext = /*#__PURE__*/React.createContext();\nexport function useConversations() {\n  _s();\n\n  return useContext(conversationContext);\n}\n\n_s(useConversations, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nexport function Provider({\n  id,\n  children\n}) {\n  _s2();\n\n  const [loadingMessages, setLoadingMessages] = useState(false);\n  const [conversations, setConversations] = useState([]);\n  const [selectedConversationIndex, setSelectedConversationIndex] = useState(0);\n  const [messages, setMessages] = useState([]);\n\n  function sendMessage(text) {\n    // Yet another place where I ran into id issues.. this is going to be a mess to fix later\n    const convo_id = conversations[selectedConversationIndex].id; // const convo_id = conversations[selectedConversationIndex]._id;\n\n    API.sendMessage(convo_id, id, text).then(data => {\n      console.log(data);\n      setMessages([...messages, data]);\n    }).catch(e => console.error(e));\n  }\n\n  useEffect(() => {\n    if (!id) return;\n    API.init(([convos, topMessages]) => {\n      setConversations(convos);\n      setMessages(topMessages);\n    }).catch(e => console.error(e));\n  }, [id]);\n  const value = {\n    conversationState: [conversations, setConversations],\n    selectedConversation: conversations[selectedConversationIndex],\n    messageState: [messages, setMessages],\n    loadingMessagesState: [loadingMessages, setLoadingMessages],\n    sendMessage,\n    userID: id,\n    selectConversationIndex: setSelectedConversationIndex\n  };\n  return /*#__PURE__*/_jsxDEV(conversationContext.Provider, {\n    value: value,\n    children: isLoading ? /*#__PURE__*/_jsxDEV(Spinner, {\n      id: \"spinner\",\n      animation: \"border\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 20\n    }, this) : children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(Provider, \"flphdpiyczHEQWMqUglQ71zEy6s=\");\n\n_c = Provider;\n\nvar _c;\n\n$RefreshReg$(_c, \"Provider\");","map":{"version":3,"sources":["/Users/timmereeestes/Desktop/Keaton/family_messaging/client/src/utils/ConvorsationProvider.js"],"names":["React","useContext","useEffect","useState","Spinner","API","conversationContext","createContext","useConversations","Provider","id","children","loadingMessages","setLoadingMessages","conversations","setConversations","selectedConversationIndex","setSelectedConversationIndex","messages","setMessages","sendMessage","text","convo_id","then","data","console","log","catch","e","error","init","convos","topMessages","value","conversationState","selectedConversation","messageState","loadingMessagesState","userID","selectConversationIndex","isLoading"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,EAAuCC,QAAvC,QAAuD,OAAvD;AACA,SAASC,OAAT,QAAwB,iBAAxB;AACA,OAAOC,GAAP,MAAgB,OAAhB;;AAEA,MAAMC,mBAAmB,gBAAGN,KAAK,CAACO,aAAN,EAA5B;AAEA,OAAO,SAASC,gBAAT,GAA4B;AAAA;;AACjC,SAAOP,UAAU,CAACK,mBAAD,CAAjB;AACD;;GAFeE,gB;;AAIhB,OAAO,SAASC,QAAT,CAAkB;AAAEC,EAAAA,EAAF;AAAMC,EAAAA;AAAN,CAAlB,EAAoC;AAAA;;AACzC,QAAM,CAACC,eAAD,EAAkBC,kBAAlB,IAAwCV,QAAQ,CAAC,KAAD,CAAtD;AACA,QAAM,CAACW,aAAD,EAAgBC,gBAAhB,IAAoCZ,QAAQ,CAAC,EAAD,CAAlD;AACA,QAAM,CAACa,yBAAD,EAA4BC,4BAA5B,IAA4Dd,QAAQ,CAAC,CAAD,CAA1E;AACA,QAAM,CAACe,QAAD,EAAWC,WAAX,IAA0BhB,QAAQ,CAAC,EAAD,CAAxC;;AACA,WAASiB,WAAT,CAAqBC,IAArB,EAA2B;AACzB;AACA,UAAMC,QAAQ,GAAGR,aAAa,CAACE,yBAAD,CAAb,CAAyCN,EAA1D,CAFyB,CAGzB;;AACAL,IAAAA,GAAG,CAACe,WAAJ,CAAgBE,QAAhB,EAA0BZ,EAA1B,EAA8BW,IAA9B,EACGE,IADH,CACSC,IAAD,IAAU;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACAL,MAAAA,WAAW,CAAC,CAAC,GAAGD,QAAJ,EAAcM,IAAd,CAAD,CAAX;AACD,KAJH,EAKGG,KALH,CAKUC,CAAD,IAAOH,OAAO,CAACI,KAAR,CAAcD,CAAd,CALhB;AAMD;;AAED1B,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI,CAACQ,EAAL,EAAS;AACTL,IAAAA,GAAG,CAACyB,IAAJ,CAAS,CAAC,CAACC,MAAD,EAASC,WAAT,CAAD,KAA2B;AAClCjB,MAAAA,gBAAgB,CAACgB,MAAD,CAAhB;AACAZ,MAAAA,WAAW,CAACa,WAAD,CAAX;AACD,KAHD,EAGGL,KAHH,CAGUC,CAAD,IAAOH,OAAO,CAACI,KAAR,CAAcD,CAAd,CAHhB;AAID,GANQ,EAMN,CAAClB,EAAD,CANM,CAAT;AAQA,QAAMuB,KAAK,GAAG;AACZC,IAAAA,iBAAiB,EAAE,CAACpB,aAAD,EAAgBC,gBAAhB,CADP;AAEZoB,IAAAA,oBAAoB,EAAErB,aAAa,CAACE,yBAAD,CAFvB;AAGZoB,IAAAA,YAAY,EAAE,CAAClB,QAAD,EAAWC,WAAX,CAHF;AAIZkB,IAAAA,oBAAoB,EAAE,CAACzB,eAAD,EAAkBC,kBAAlB,CAJV;AAKZO,IAAAA,WALY;AAMZkB,IAAAA,MAAM,EAAE5B,EANI;AAOZ6B,IAAAA,uBAAuB,EAAEtB;AAPb,GAAd;AASA,sBACE,QAAC,mBAAD,CAAqB,QAArB;AAA8B,IAAA,KAAK,EAAEgB,KAArC;AAAA,cACGO,SAAS,gBAAG,QAAC,OAAD;AAAS,MAAA,EAAE,EAAC,SAAZ;AAAsB,MAAA,SAAS,EAAC;AAAhC;AAAA;AAAA;AAAA;AAAA,YAAH,GAAiD7B;AAD7D;AAAA;AAAA;AAAA;AAAA,UADF;AAKD;;IAvCeF,Q;;KAAAA,Q","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport { Spinner } from \"react-bootstrap\";\nimport API from \"./API\";\n\nconst conversationContext = React.createContext();\n\nexport function useConversations() {\n  return useContext(conversationContext);\n}\n\nexport function Provider({ id, children }) {\n  const [loadingMessages, setLoadingMessages] = useState(false);\n  const [conversations, setConversations] = useState([]);\n  const [selectedConversationIndex, setSelectedConversationIndex] = useState(0);\n  const [messages, setMessages] = useState([]);\n  function sendMessage(text) {\n    // Yet another place where I ran into id issues.. this is going to be a mess to fix later\n    const convo_id = conversations[selectedConversationIndex].id;\n    // const convo_id = conversations[selectedConversationIndex]._id;\n    API.sendMessage(convo_id, id, text)\n      .then((data) => {\n        console.log(data);\n        setMessages([...messages, data]);\n      })\n      .catch((e) => console.error(e));\n  }\n\n  useEffect(() => {\n    if (!id) return;\n    API.init(([convos, topMessages]) => {\n      setConversations(convos);\n      setMessages(topMessages);\n    }).catch((e) => console.error(e));\n  }, [id]);\n\n  const value = {\n    conversationState: [conversations, setConversations],\n    selectedConversation: conversations[selectedConversationIndex],\n    messageState: [messages, setMessages],\n    loadingMessagesState: [loadingMessages, setLoadingMessages],\n    sendMessage,\n    userID: id,\n    selectConversationIndex: setSelectedConversationIndex,\n  };\n  return (\n    <conversationContext.Provider value={value}>\n      {isLoading ? <Spinner id=\"spinner\" animation=\"border\" /> : children}\n    </conversationContext.Provider>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}