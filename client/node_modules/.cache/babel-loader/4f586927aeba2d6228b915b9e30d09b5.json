{"ast":null,"code":"var _jsxFileName = \"/Users/timmereeestes/Desktop/Keaton/family_messaging/client/src/CometChat/src/components/Users/CometChatUserDetails/index.js\";\nimport React from \"react\";\nimport dateFormat from \"dateformat\";\n/** @jsxRuntime classic */\n\n/** @jsx jsx */\n\nimport { jsx } from \"@emotion/core\";\nimport { CometChat } from \"@cometchat-pro/chat\";\nimport { CometChatAvatar, CometChatToastNotification } from \"../../Shared/\";\nimport { CometChatSharedMediaView } from \"../../Shared/CometChatSharedMediaView/index.js\";\nimport { UserDetailManager } from \"./controller\";\nimport { CometChatContext } from \"../../../util/CometChatContext\";\nimport * as enums from \"../../../util/enums.js\";\nimport Translator from \"../../../resources/localization/translator\";\nimport { userDetailStyle, headerStyle, headerCloseStyle, headerTitleStyle, sectionStyle, actionSectionStyle, mediaSectionStyle, privacySectionStyle, sectionHeaderStyle, sectionContentStyle, contentItemStyle, itemLinkStyle, userInfoSectionStyle, userThumbnailStyle, userNameStyle, userStatusStyle, userPresenceStyle } from \"./style\";\nimport navigateIcon from \"./resources/back.svg\";\n\nclass CometChatUserDetails extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.enableUserPresence = () => {\n      this.context.FeatureRestriction.isUserPresenceEnabled().then(response => {\n        if (response !== this.state.enableUserPresence) {\n          this.setState({\n            enableUserPresence: response\n          });\n        }\n      }).catch(error => {\n        if (this.state.enableUserPresence !== false) {\n          this.setState({\n            enableUserPresence: false\n          });\n        }\n      });\n    };\n\n    this.updateUser = (key, user) => {\n      switch (key) {\n        case enums.USER_ONLINE:\n        case enums.USER_OFFLINE:\n          {\n            if (this.context.type === CometChat.ACTION_TYPE.TYPE_USER && this.context.item.uid === user.uid) {\n              //if user presence feature is disabled\n              if (this.state.enableUserPresence === false) {\n                return false;\n              }\n\n              let status = \"\";\n\n              if (user.status === CometChat.USER_STATUS.OFFLINE) {\n                status = Translator.translate(\"OFFLINE\", this.context.language);\n              } else if (user.status === CometChat.USER_STATUS.ONLINE) {\n                status = Translator.translate(\"ONLINE\", this.context.language);\n              }\n\n              this.setState({\n                status: status\n              });\n            }\n\n            break;\n          }\n\n        default:\n          break;\n      }\n    };\n\n    this.setStatusForUser = () => {\n      let status = null;\n\n      if (this.context.item.status === CometChat.USER_STATUS.OFFLINE && this.context.item.lastActiveAt) {\n        const lastActive = this.context.item.lastActiveAt * 1000;\n        const messageDate = dateFormat(lastActive, \"dS mmm yyyy, h:MM TT\");\n        status = `${Translator.translate(\"LAST_ACTIVE_AT\", this.context.language)}: ${messageDate}`;\n      } else if (this.context.item.status === CometChat.USER_STATUS.OFFLINE) {\n        status = Translator.translate(\"OFFLINE\", this.context.language);\n      } else if (this.context.item.status === CometChat.USER_STATUS.ONLINE) {\n        status = Translator.translate(\"ONLINE\", this.context.language);\n      }\n\n      this.setState({\n        status: status\n      });\n    };\n\n    this.enableSharedMedia = () => {\n      this.context.FeatureRestriction.isSharedMediaEnabled().then(response => {\n        /**\n         * Don't update state if the response has the same value\n         */\n        if (response !== this.state.enableSharedMedia && this._isMounted) {\n          this.setState({\n            enableSharedMedia: response\n          });\n        }\n      }).catch(error => {\n        if (this.state.enableSharedMedia !== false && this._isMounted) {\n          this.setState({\n            enableSharedMedia: false\n          });\n        }\n      });\n    };\n\n    this.enableBlockUser = () => {\n      this.context.FeatureRestriction.isBlockUserEnabled().then(response => {\n        /**\n         * Don't update state if the response has the same value\n         */\n        if (response !== this.state.enableBlockUser) {\n          this.setState({\n            enableBlockUser: response\n          });\n        }\n      }).catch(error => {\n        if (this.state.enableBlockUser !== false) {\n          this.setState({\n            enableBlockUser: false\n          });\n        }\n      });\n    };\n\n    this.enableViewProfile = () => {\n      this.context.FeatureRestriction.isViewProfileEnabled().then(response => {\n        if (response !== this.state.enableViewProfile && this._isMounted) {\n          this.setState({\n            enableViewProfile: response\n          });\n        }\n      }).catch(error => {\n        if (this.state.enableViewProfile !== false && this._isMounted) {\n          this.setState({\n            enableViewProfile: false\n          });\n        }\n      });\n    };\n\n    this.blockUser = () => {\n      let uid = this.context.item.uid;\n      let usersList = [uid];\n      CometChat.blockUsers(usersList).then(response => {\n        if (response && response.hasOwnProperty(uid) && response[uid].hasOwnProperty(\"success\") && response[uid][\"success\"] === true) {\n          this.context.setToastMessage(\"success\", \"BLOCK_USER_SUCCESS\");\n          this.context.setItem(Object.assign({}, this.context.item, {\n            blockedByMe: true\n          }));\n          this.context.setType(CometChat.ACTION_TYPE.TYPE_USER);\n        } else {\n          this.toastRef.setError(\"SOMETHING_WRONG\");\n        }\n      }).catch(error => this.toastRef.setError(\"SOMETHING_WRONG\"));\n    };\n\n    this.unblockUser = () => {\n      let uid = this.context.item.uid;\n      let usersList = [uid];\n      CometChat.unblockUsers(usersList).then(response => {\n        if (response && response.hasOwnProperty(uid) && response[uid].hasOwnProperty(\"success\") && response[uid][\"success\"] === true) {\n          this.context.setToastMessage(\"success\", \"UNBLOCK_USER_SUCCESS\");\n          this.context.setItem(Object.assign({}, this.context.item, {\n            blockedByMe: false\n          }));\n          this.context.setType(CometChat.ACTION_TYPE.TYPE_USER);\n        } else {\n          this.toastRef.setError(\"SOMETHING_WRONG\");\n        }\n      }).catch(error => this.toastRef.setError(\"SOMETHING_WRONG\"));\n    };\n\n    this.viewProfile = () => {\n      const profileLink = this.context.item.link;\n      window.open(profileLink, \"\", \"fullscreen=yes, scrollbars=auto\");\n    };\n\n    this._isMounted = false;\n    this.state = {\n      loggedInUser: null,\n      status: null,\n      enableSharedMedia: false,\n      enableBlockUser: false,\n      enableViewProfile: false,\n      enableUserPresence: false\n    };\n    this.toastRef = /*#__PURE__*/React.createRef();\n  }\n\n  componentDidMount() {\n    CometChat.getLoggedinUser().then(user => {\n      if (this._isMounted) {\n        this.setState({\n          loggedInUser: user\n        });\n      }\n    }).catch(error => this.toastRef.setError(\"SOMETHING_WRONG\"));\n    this._isMounted = true;\n    this.toastRef = /*#__PURE__*/React.createRef();\n    this.UserDetailManager = new UserDetailManager();\n    this.UserDetailManager.attachListeners(this.updateUser);\n    this.setStatusForUser();\n    this.enableSharedMedia();\n    this.enableBlockUser();\n    this.enableViewProfile();\n    this.enableUserPresence();\n  }\n\n  componentDidUpdate() {\n    this.enableSharedMedia();\n    this.enableBlockUser();\n    this.enableViewProfile();\n    this.enableUserPresence();\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n    this.UserDetailManager.removeListeners();\n    this.UserDetailManager = null;\n  }\n\n  render() {\n    if (this.state.loggedInUser === null) {\n      return null;\n    }\n\n    let viewProfile = null;\n\n    if (this.state.enableViewProfile === true && this.context.item.hasOwnProperty(\"link\") && this.context.item.link && this.context.item.link.trim().length) {\n      viewProfile = jsx(\"div\", {\n        css: sectionStyle(),\n        className: \"detailpane__section\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 5\n        }\n      }, jsx(\"div\", {\n        css: actionSectionStyle(this.context),\n        className: \"section section__viewprofile\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 6\n        }\n      }, jsx(\"h6\", {\n        css: sectionHeaderStyle(this.props),\n        className: \"section__header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 7\n        }\n      }, Translator.translate(\"ACTIONS\", this.context.language)), jsx(\"div\", {\n        css: sectionContentStyle(),\n        className: \"section__content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 7\n        }\n      }, jsx(\"div\", {\n        css: contentItemStyle(),\n        className: \"content__item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 8\n        }\n      }, jsx(\"div\", {\n        css: itemLinkStyle(this.context),\n        className: \"item__link\",\n        onClick: this.viewProfile,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 9\n        }\n      }, Translator.translate(\"VIEW_PROFILE\", this.context.language))))));\n    }\n\n    let blockUserText;\n\n    if (this.context.item.blockedByMe) {\n      blockUserText = jsx(\"div\", {\n        css: itemLinkStyle(this.context),\n        className: \"item__link\",\n        onClick: this.unblockUser,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 5\n        }\n      }, Translator.translate(\"UNBLOCK_USER\", this.context.language));\n    } else {\n      blockUserText = jsx(\"div\", {\n        css: itemLinkStyle(this.context),\n        className: \"item__link\",\n        onClick: this.blockUser,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 5\n        }\n      }, Translator.translate(\"BLOCK_USER\", this.context.language));\n    }\n\n    let blockUserView = jsx(\"div\", {\n      css: sectionStyle(),\n      className: \"detailpane__section\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 4\n      }\n    }, jsx(\"div\", {\n      css: privacySectionStyle(this.context),\n      className: \"section section__privacy\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 5\n      }\n    }, jsx(\"h6\", {\n      css: sectionHeaderStyle(this.context),\n      className: \"section__header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 6\n      }\n    }, Translator.translate(\"OPTIONS\", this.context.language)), jsx(\"div\", {\n      css: sectionContentStyle(),\n      className: \"section__content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 6\n      }\n    }, jsx(\"div\", {\n      css: contentItemStyle(),\n      className: \"content__item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 7\n      }\n    }, blockUserText)))); //if block/unblock user feature is disabled\n\n    if (this.state.enableBlockUser === false) {\n      blockUserView = null;\n    }\n\n    let sharedmediaView = jsx(\"div\", {\n      css: mediaSectionStyle(),\n      className: \"detailpane__section\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 4\n      }\n    }, jsx(CometChatSharedMediaView, {\n      theme: this.props.theme,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 5\n      }\n    })); //if shared media feature is disabled\n\n    if (this.state.enableSharedMedia === false) {\n      sharedmediaView = null;\n    }\n\n    return jsx(\"div\", {\n      css: userDetailStyle(this.context),\n      className: \"detailpane detailpane--user\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 4\n      }\n    }, jsx(\"div\", {\n      css: headerStyle(this.context),\n      className: \"detailpane__header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 5\n      }\n    }, jsx(\"div\", {\n      css: headerCloseStyle(navigateIcon, this.context),\n      className: \"header__close\",\n      onClick: () => this.props.actionGenerated(enums.ACTIONS[\"CLOSE_USER_DETAIL\"]),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 6\n      }\n    }), jsx(\"h4\", {\n      css: headerTitleStyle(),\n      className: \"header__title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 6\n      }\n    }, Translator.translate(\"DETAILS\", this.context.language))), jsx(\"div\", {\n      css: sectionStyle(),\n      className: \"detailpane__section\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 5\n      }\n    }, jsx(\"div\", {\n      css: userInfoSectionStyle(),\n      className: \"section section__userinfo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 6\n      }\n    }, jsx(\"div\", {\n      css: userThumbnailStyle(),\n      className: \"user__thumbnail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 7\n      }\n    }, jsx(CometChatAvatar, {\n      user: this.context.item,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 8\n      }\n    })), jsx(\"div\", {\n      css: userStatusStyle(),\n      className: \"user__status\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 7\n      }\n    }, jsx(\"h6\", {\n      css: userNameStyle(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 8\n      }\n    }, this.context.item.name), jsx(\"span\", {\n      css: userPresenceStyle(this.context, this.state),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 8\n      }\n    }, this.state.status)))), jsx(CometChatToastNotification, {\n      ref: el => this.toastRef = el,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 5\n      }\n    }), viewProfile, blockUserView, sharedmediaView);\n  }\n\n}\n\nCometChatUserDetails.contextType = CometChatContext;\nexport { CometChatUserDetails };","map":{"version":3,"sources":["/Users/timmereeestes/Desktop/Keaton/family_messaging/client/src/CometChat/src/components/Users/CometChatUserDetails/index.js"],"names":["React","dateFormat","jsx","CometChat","CometChatAvatar","CometChatToastNotification","CometChatSharedMediaView","UserDetailManager","CometChatContext","enums","Translator","userDetailStyle","headerStyle","headerCloseStyle","headerTitleStyle","sectionStyle","actionSectionStyle","mediaSectionStyle","privacySectionStyle","sectionHeaderStyle","sectionContentStyle","contentItemStyle","itemLinkStyle","userInfoSectionStyle","userThumbnailStyle","userNameStyle","userStatusStyle","userPresenceStyle","CometChatUserDetails","Component","constructor","props","enableUserPresence","context","FeatureRestriction","isUserPresenceEnabled","then","response","state","setState","catch","error","updateUser","key","user","USER_ONLINE","USER_OFFLINE","type","ACTION_TYPE","TYPE_USER","item","uid","status","USER_STATUS","OFFLINE","translate","language","ONLINE","setStatusForUser","lastActiveAt","lastActive","messageDate","enableSharedMedia","isSharedMediaEnabled","_isMounted","enableBlockUser","isBlockUserEnabled","enableViewProfile","isViewProfileEnabled","blockUser","usersList","blockUsers","hasOwnProperty","setToastMessage","setItem","Object","assign","blockedByMe","setType","toastRef","setError","unblockUser","unblockUsers","viewProfile","profileLink","link","window","open","loggedInUser","createRef","componentDidMount","getLoggedinUser","attachListeners","componentDidUpdate","componentWillUnmount","removeListeners","render","trim","length","blockUserText","blockUserView","sharedmediaView","theme","navigateIcon","actionGenerated","ACTIONS","name","el","contextType"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport dateFormat from \"dateformat\";\n/** @jsxRuntime classic */\n/** @jsx jsx */\nimport { jsx } from \"@emotion/core\";\nimport { CometChat } from \"@cometchat-pro/chat\";\n\nimport { CometChatAvatar, CometChatToastNotification } from \"../../Shared/\";\nimport { CometChatSharedMediaView } from \"../../Shared/CometChatSharedMediaView/index.js\";\n\nimport { UserDetailManager } from \"./controller\";\n\nimport { CometChatContext } from \"../../../util/CometChatContext\";\nimport * as enums from \"../../../util/enums.js\";\n\nimport Translator from \"../../../resources/localization/translator\";\n\nimport {\n\tuserDetailStyle,\n\theaderStyle,\n\theaderCloseStyle,\n\theaderTitleStyle,\n\tsectionStyle,\n\tactionSectionStyle,\n\tmediaSectionStyle,\n\tprivacySectionStyle,\n\tsectionHeaderStyle,\n\tsectionContentStyle,\n\tcontentItemStyle,\n\titemLinkStyle,\n\tuserInfoSectionStyle,\n\tuserThumbnailStyle,\n\tuserNameStyle,\n\tuserStatusStyle,\n\tuserPresenceStyle,\n} from \"./style\";\n\nimport navigateIcon from \"./resources/back.svg\";\n\nclass CometChatUserDetails extends React.Component {\n\tstatic contextType = CometChatContext;\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis._isMounted = false;\n\t\tthis.state = {\n\t\t\tloggedInUser: null,\n\t\t\tstatus: null,\n\t\t\tenableSharedMedia: false,\n\t\t\tenableBlockUser: false,\n\t\t\tenableViewProfile: false,\n\t\t\tenableUserPresence: false,\n\t\t};\n\n\t\tthis.toastRef = React.createRef();\n\t}\n\n\tcomponentDidMount() {\n\n\t\tCometChat.getLoggedinUser()\n\t\t\t.then(user => {\n\t\t\t\tif (this._isMounted) {\n\t\t\t\t\tthis.setState({ loggedInUser: user });\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => this.toastRef.setError(\"SOMETHING_WRONG\"));\n\n\t\tthis._isMounted = true;\n\t\tthis.toastRef = React.createRef();\n\n\t\tthis.UserDetailManager = new UserDetailManager();\n\t\tthis.UserDetailManager.attachListeners(this.updateUser);\n\n\t\tthis.setStatusForUser();\n\t\tthis.enableSharedMedia();\n\t\tthis.enableBlockUser();\n\t\tthis.enableViewProfile();\n\t\tthis.enableUserPresence();\n\t}\n\n\tcomponentDidUpdate() {\n\t\tthis.enableSharedMedia();\n\t\tthis.enableBlockUser();\n\t\tthis.enableViewProfile();\n\t\tthis.enableUserPresence();\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis._isMounted = false;\n\t\tthis.UserDetailManager.removeListeners();\n\t\tthis.UserDetailManager = null;\n\t}\n\n\tenableUserPresence = () => {\n\t\tthis.context.FeatureRestriction.isUserPresenceEnabled()\n\t\t\t.then(response => {\n\t\t\t\tif (response !== this.state.enableUserPresence) {\n\t\t\t\t\tthis.setState({ enableUserPresence: response });\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (this.state.enableUserPresence !== false) {\n\t\t\t\t\tthis.setState({ enableUserPresence: false });\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\tupdateUser = (key, user) => {\n\t\tswitch (key) {\n\t\t\tcase enums.USER_ONLINE:\n\t\t\tcase enums.USER_OFFLINE: {\n\t\t\t\tif (this.context.type === CometChat.ACTION_TYPE.TYPE_USER && this.context.item.uid === user.uid) {\n\t\t\t\t\t//if user presence feature is disabled\n\t\t\t\t\tif (this.state.enableUserPresence === false) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet status = \"\";\n\t\t\t\t\tif (user.status === CometChat.USER_STATUS.OFFLINE) {\n\t\t\t\t\t\tstatus = Translator.translate(\"OFFLINE\", this.context.language);\n\t\t\t\t\t} else if (user.status === CometChat.USER_STATUS.ONLINE) {\n\t\t\t\t\t\tstatus = Translator.translate(\"ONLINE\", this.context.language);\n\t\t\t\t\t}\n\t\t\t\t\tthis.setState({ status: status });\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tsetStatusForUser = () => {\n\t\tlet status = null;\n\t\tif (this.context.item.status === CometChat.USER_STATUS.OFFLINE && this.context.item.lastActiveAt) {\n\t\t\tconst lastActive = this.context.item.lastActiveAt * 1000;\n\t\t\tconst messageDate = dateFormat(lastActive, \"dS mmm yyyy, h:MM TT\");\n\n\t\t\tstatus = `${Translator.translate(\"LAST_ACTIVE_AT\", this.context.language)}: ${messageDate}`;\n\t\t} else if (this.context.item.status === CometChat.USER_STATUS.OFFLINE) {\n\t\t\tstatus = Translator.translate(\"OFFLINE\", this.context.language);\n\t\t} else if (this.context.item.status === CometChat.USER_STATUS.ONLINE) {\n\t\t\tstatus = Translator.translate(\"ONLINE\", this.context.language);\n\t\t}\n\n\t\tthis.setState({ status: status });\n\t};\n\n\tenableSharedMedia = () => {\n\t\tthis.context.FeatureRestriction.isSharedMediaEnabled()\n\t\t\t.then(response => {\n\t\t\t\t/**\n\t\t\t\t * Don't update state if the response has the same value\n\t\t\t\t */\n\t\t\t\tif (response !== this.state.enableSharedMedia && this._isMounted) {\n\t\t\t\t\tthis.setState({ enableSharedMedia: response });\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (this.state.enableSharedMedia !== false && this._isMounted) {\n\t\t\t\t\tthis.setState({ enableSharedMedia: false });\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\tenableBlockUser = () => {\n\t\tthis.context.FeatureRestriction.isBlockUserEnabled()\n\t\t\t.then(response => {\n\t\t\t\t/**\n\t\t\t\t * Don't update state if the response has the same value\n\t\t\t\t */\n\t\t\t\tif (response !== this.state.enableBlockUser) {\n\t\t\t\t\tthis.setState({ enableBlockUser: response });\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (this.state.enableBlockUser !== false) {\n\t\t\t\t\tthis.setState({ enableBlockUser: false });\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\tenableViewProfile = () => {\n\t\tthis.context.FeatureRestriction.isViewProfileEnabled()\n\t\t\t.then(response => {\n\t\t\t\tif (response !== this.state.enableViewProfile && this._isMounted) {\n\t\t\t\t\tthis.setState({ enableViewProfile: response });\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (this.state.enableViewProfile !== false && this._isMounted) {\n\t\t\t\t\tthis.setState({ enableViewProfile: false });\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\tblockUser = () => {\n\n\t\tlet uid = this.context.item.uid;\n\t\tlet usersList = [uid];\n\t\tCometChat.blockUsers(usersList)\n\t\t\t.then(response => {\n\t\t\t\tif (response && response.hasOwnProperty(uid) && response[uid].hasOwnProperty(\"success\") && response[uid][\"success\"] === true) {\n\t\t\t\t\tthis.context.setToastMessage(\"success\", \"BLOCK_USER_SUCCESS\");\n\t\t\t\t\tthis.context.setItem(Object.assign({}, this.context.item, { blockedByMe: true }));\n\t\t\t\t\tthis.context.setType(CometChat.ACTION_TYPE.TYPE_USER);\n\t\t\t\t} else {\n\t\t\t\t\tthis.toastRef.setError(\"SOMETHING_WRONG\");\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => this.toastRef.setError(\"SOMETHING_WRONG\"));\n\t};\n\n\tunblockUser = () => {\n\n\t\tlet uid = this.context.item.uid;\n\t\tlet usersList = [uid];\n\t\tCometChat.unblockUsers(usersList)\n\t\t\t.then(response => {\n\t\t\t\tif (response && response.hasOwnProperty(uid) && response[uid].hasOwnProperty(\"success\") && response[uid][\"success\"] === true) {\n\t\t\t\t\tthis.context.setToastMessage(\"success\", \"UNBLOCK_USER_SUCCESS\");\n\t\t\t\t\tthis.context.setItem(Object.assign({}, this.context.item, { blockedByMe: false }));\n\t\t\t\t\tthis.context.setType(CometChat.ACTION_TYPE.TYPE_USER);\n\t\t\t\t} else {\n\t\t\t\t\tthis.toastRef.setError(\"SOMETHING_WRONG\");\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => this.toastRef.setError(\"SOMETHING_WRONG\"));\n\t};\n\n\tviewProfile = () => {\n\t\tconst profileLink = this.context.item.link;\n\t\twindow.open(profileLink, \"\", \"fullscreen=yes, scrollbars=auto\");\n\t};\n\n\trender() {\n\n\t\tif (this.state.loggedInUser === null) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet viewProfile = null;\n\t\tif (this.state.enableViewProfile === true && this.context.item.hasOwnProperty(\"link\") && this.context.item.link && this.context.item.link.trim().length) {\n\t\t\tviewProfile = (\n\t\t\t\t<div css={sectionStyle()} className=\"detailpane__section\">\n\t\t\t\t\t<div css={actionSectionStyle(this.context)} className=\"section section__viewprofile\">\n\t\t\t\t\t\t<h6 css={sectionHeaderStyle(this.props)} className=\"section__header\">\n\t\t\t\t\t\t\t{Translator.translate(\"ACTIONS\", this.context.language)}\n\t\t\t\t\t\t</h6>\n\t\t\t\t\t\t<div css={sectionContentStyle()} className=\"section__content\">\n\t\t\t\t\t\t\t<div css={contentItemStyle()} className=\"content__item\">\n\t\t\t\t\t\t\t\t<div css={itemLinkStyle(this.context)} className=\"item__link\" onClick={this.viewProfile}>\n\t\t\t\t\t\t\t\t\t{Translator.translate(\"VIEW_PROFILE\", this.context.language)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tlet blockUserText;\n\t\tif (this.context.item.blockedByMe) {\n\t\t\tblockUserText = (\n\t\t\t\t<div css={itemLinkStyle(this.context)} className=\"item__link\" onClick={this.unblockUser}>\n\t\t\t\t\t{Translator.translate(\"UNBLOCK_USER\", this.context.language)}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} else {\n\t\t\tblockUserText = (\n\t\t\t\t<div css={itemLinkStyle(this.context)} className=\"item__link\" onClick={this.blockUser}>\n\t\t\t\t\t{Translator.translate(\"BLOCK_USER\", this.context.language)}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tlet blockUserView = (\n\t\t\t<div css={sectionStyle()} className=\"detailpane__section\">\n\t\t\t\t<div css={privacySectionStyle(this.context)} className=\"section section__privacy\">\n\t\t\t\t\t<h6 css={sectionHeaderStyle(this.context)} className=\"section__header\">\n\t\t\t\t\t\t{Translator.translate(\"OPTIONS\", this.context.language)}\n\t\t\t\t\t</h6>\n\t\t\t\t\t<div css={sectionContentStyle()} className=\"section__content\">\n\t\t\t\t\t\t<div css={contentItemStyle()} className=\"content__item\">\n\t\t\t\t\t\t\t{blockUserText}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\n\t\t//if block/unblock user feature is disabled\n\t\tif (this.state.enableBlockUser === false) {\n\t\t\tblockUserView = null;\n\t\t}\n\n\t\tlet sharedmediaView = (\n\t\t\t<div css={mediaSectionStyle()} className=\"detailpane__section\">\n\t\t\t\t<CometChatSharedMediaView theme={this.props.theme} />\n\t\t\t</div>\n\t\t);\n\n\t\t//if shared media feature is disabled\n\t\tif (this.state.enableSharedMedia === false) {\n\t\t\tsharedmediaView = null;\n\t\t}\n\n\t\treturn (\n\t\t\t<div css={userDetailStyle(this.context)} className=\"detailpane detailpane--user\">\n\t\t\t\t<div css={headerStyle(this.context)} className=\"detailpane__header\">\n\t\t\t\t\t<div css={headerCloseStyle(navigateIcon, this.context)} className=\"header__close\" onClick={() => this.props.actionGenerated(enums.ACTIONS[\"CLOSE_USER_DETAIL\"])}></div>\n\t\t\t\t\t<h4 css={headerTitleStyle()} className=\"header__title\">\n\t\t\t\t\t\t{Translator.translate(\"DETAILS\", this.context.language)}\n\t\t\t\t\t</h4>\n\t\t\t\t</div>\n\t\t\t\t<div css={sectionStyle()} className=\"detailpane__section\">\n\t\t\t\t\t<div css={userInfoSectionStyle()} className=\"section section__userinfo\">\n\t\t\t\t\t\t<div css={userThumbnailStyle()} className=\"user__thumbnail\">\n\t\t\t\t\t\t\t<CometChatAvatar user={this.context.item} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div css={userStatusStyle()} className=\"user__status\">\n\t\t\t\t\t\t\t<h6 css={userNameStyle()}>{this.context.item.name}</h6>\n\t\t\t\t\t\t\t<span css={userPresenceStyle(this.context, this.state)}>{this.state.status}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<CometChatToastNotification ref={el => (this.toastRef = el)} />\n\t\t\t\t{viewProfile}\n\t\t\t\t{blockUserView}\n\t\t\t\t{sharedmediaView}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport { CometChatUserDetails };"]},"metadata":{},"sourceType":"module"}