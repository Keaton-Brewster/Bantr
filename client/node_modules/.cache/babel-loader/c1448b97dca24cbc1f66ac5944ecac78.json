{"ast":null,"code":"var _jsxFileName = \"/Users/timmereeestes/Desktop/Keaton/family_messaging/client/src/CometChatWorkspace/src/components/Shared/CometChatAvatar/index.js\";\nimport React from \"react\";\n/** @jsxRuntime classic */\n\n/** @jsx jsx */\n\nimport { jsx } from \"@emotion/core\";\nimport PropTypes from \"prop-types\";\nimport { CometChat } from \"@cometchat-pro/chat\";\nimport { theme } from \"../../../resources/theme\";\nimport { imgStyle } from \"./style\";\nimport srcIcon from \"./resources/1px.png\";\n\nclass CometChatAvatar extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.setAvatarImage = () => {\n      if (this.props.image.trim().length) {\n        this.getImage(this.props.image);\n      } else if (Object.keys(this.props.user).length) {\n        if (this.props.user.hasOwnProperty(\"avatar\")) {\n          const avatarImage = this.props.user.avatar;\n          this.getImage(avatarImage);\n        } else {\n          const uid = this.props.user.uid;\n          const char = this.props.user.name.charAt(0).toUpperCase();\n          const avatarImage = this.generateAvatar(uid, char);\n          this.getImage(avatarImage);\n        }\n      } else if (Object.keys(this.props.group).length) {\n        if (this.props.group.hasOwnProperty(\"icon\")) {\n          const avatarImage = this.props.group.icon;\n          this.getImage(avatarImage);\n        } else {\n          const guid = this.props.group.guid;\n          const char = this.props.group.name.charAt(0).toUpperCase();\n          const avatarImage = this.generateAvatar(guid, char);\n          this.getImage(avatarImage);\n        }\n      }\n    };\n\n    this.getImage = image => {\n      let img = new Image();\n      img.src = image;\n\n      img.onload = () => {\n        if (this._isMounted) {\n          this.setState({\n            avatarImage: image\n          });\n        }\n      };\n    };\n\n    this.generateAvatar = (generator, data) => {\n      const stringToColour = function (str) {\n        let hash = 0;\n\n        for (let i = 0; i < str.length; i++) {\n          hash = str.charCodeAt(i) + ((hash << 5) - hash);\n        }\n\n        let colour = '#';\n\n        for (let i = 0; i < 3; i++) {\n          let value = hash >> i * 8 & 0xFF;\n          colour += ('00' + value.toString(16)).substr(-2);\n        }\n\n        return colour;\n      };\n\n      const canvas = document.createElement(\"canvas\");\n      const context = canvas.getContext(\"2d\");\n      canvas.width = 200;\n      canvas.height = 200; // Draw background\n\n      context.fillStyle = stringToColour(generator);\n      context.fillRect(0, 0, canvas.width, canvas.height); // Draw text\n\n      context.font = \"bold 100px 'Inter', sans-serif\";\n      context.fillStyle = \"white\"; //foregroundColor;\n\n      context.textAlign = \"center\";\n      context.textBaseline = \"middle\";\n      context.fillText(data, canvas.width / 2, canvas.height / 2);\n      return canvas.toDataURL(\"image/png\");\n    };\n\n    this.imgRef = /*#__PURE__*/React.createRef();\n    this._isMounted = false;\n    this.state = {\n      avatarImage: srcIcon\n    };\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n    this.setAvatarImage();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps !== this.props) {\n      this.setAvatarImage();\n    }\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  render() {\n    const borderWidth = this.props.borderWidth;\n    const borderStyle = this.props.borderStyle;\n    const borderColor = this.props.borderColor;\n    const cornerRadius = this.props.cornerRadius;\n\n    const getStyle = () => ({\n      borderWidth: borderWidth,\n      borderStyle: borderStyle,\n      borderColor: borderColor,\n      borderRadius: cornerRadius\n    });\n\n    return jsx(\"img\", {\n      src: this.state.avatarImage,\n      css: imgStyle(),\n      alt: this.state.avatarImage,\n      style: getStyle(),\n      ref: el => {\n        this.imgRef = el;\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 4\n      }\n    });\n  }\n\n} // Specifies the default values for props:\n\n\nCometChatAvatar.defaultProps = {\n  borderWidth: \"1px\",\n  borderStyle: \"solid\",\n  borderColor: theme.borderColor.primary,\n  cornerRadius: \"50%\",\n  theme: theme,\n  image: \"\",\n  user: {},\n  group: {}\n};\nCometChatAvatar.propTypes = {\n  borderWidth: PropTypes.string,\n  borderStyle: PropTypes.string,\n  borderColor: PropTypes.string,\n  cornerRadius: PropTypes.string,\n  image: PropTypes.string,\n  theme: PropTypes.object,\n  user: PropTypes.oneOfType([PropTypes.object, PropTypes.shape(CometChat.User)]),\n  group: PropTypes.oneOfType([PropTypes.object, PropTypes.shape(CometChat.Group)])\n};\nexport { CometChatAvatar };","map":{"version":3,"sources":["/Users/timmereeestes/Desktop/Keaton/family_messaging/client/src/CometChatWorkspace/src/components/Shared/CometChatAvatar/index.js"],"names":["React","jsx","PropTypes","CometChat","theme","imgStyle","srcIcon","CometChatAvatar","Component","constructor","props","setAvatarImage","image","trim","length","getImage","Object","keys","user","hasOwnProperty","avatarImage","avatar","uid","char","name","charAt","toUpperCase","generateAvatar","group","icon","guid","img","Image","src","onload","_isMounted","setState","generator","data","stringToColour","str","hash","i","charCodeAt","colour","value","toString","substr","canvas","document","createElement","context","getContext","width","height","fillStyle","fillRect","font","textAlign","textBaseline","fillText","toDataURL","imgRef","createRef","state","componentDidMount","componentDidUpdate","prevProps","componentWillUnmount","render","borderWidth","borderStyle","borderColor","cornerRadius","getStyle","borderRadius","el","defaultProps","primary","propTypes","string","object","oneOfType","shape","User","Group"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA;;AACA;;AACA,SAASC,GAAT,QAAoB,eAApB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,SAAT,QAA0B,qBAA1B;AAEA,SAASC,KAAT,QAAsB,0BAAtB;AAEA,SAASC,QAAT,QAAyB,SAAzB;AAEA,OAAOC,OAAP,MAAoB,qBAApB;;AAEA,MAAMC,eAAN,SAA8BP,KAAK,CAACQ,SAApC,CAA8C;AAE7CC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AAClB,UAAMA,KAAN;;AADkB,SA4BnBC,cA5BmB,GA4BF,MAAM;AAEtB,UAAK,KAAKD,KAAL,CAAWE,KAAZ,CAAmBC,IAAnB,GAA0BC,MAA9B,EAAsC;AAErC,aAAKC,QAAL,CAAc,KAAKL,KAAL,CAAWE,KAAzB;AAEA,OAJD,MAIO,IAAII,MAAM,CAACC,IAAP,CAAY,KAAKP,KAAL,CAAWQ,IAAvB,EAA6BJ,MAAjC,EAAyC;AAE/C,YAAI,KAAKJ,KAAL,CAAWQ,IAAX,CAAgBC,cAAhB,CAA+B,QAA/B,CAAJ,EAA8C;AAE7C,gBAAMC,WAAW,GAAG,KAAKV,KAAL,CAAWQ,IAAX,CAAgBG,MAApC;AACA,eAAKN,QAAL,CAAcK,WAAd;AAEA,SALD,MAKO;AAEN,gBAAME,GAAG,GAAG,KAAKZ,KAAL,CAAWQ,IAAX,CAAgBI,GAA5B;AACA,gBAAMC,IAAI,GAAG,KAAKb,KAAL,CAAWQ,IAAX,CAAgBM,IAAhB,CAAqBC,MAArB,CAA4B,CAA5B,EAA+BC,WAA/B,EAAb;AAEA,gBAAMN,WAAW,GAAG,KAAKO,cAAL,CAAoBL,GAApB,EAAyBC,IAAzB,CAApB;AACA,eAAKR,QAAL,CAAcK,WAAd;AACA;AAED,OAhBM,MAgBA,IAAIJ,MAAM,CAACC,IAAP,CAAY,KAAKP,KAAL,CAAWkB,KAAvB,EAA8Bd,MAAlC,EAA0C;AAEhD,YAAI,KAAKJ,KAAL,CAAWkB,KAAX,CAAiBT,cAAjB,CAAgC,MAAhC,CAAJ,EAA6C;AAE5C,gBAAMC,WAAW,GAAG,KAAKV,KAAL,CAAWkB,KAAX,CAAiBC,IAArC;AACA,eAAKd,QAAL,CAAcK,WAAd;AAEA,SALD,MAKO;AAEN,gBAAMU,IAAI,GAAG,KAAKpB,KAAL,CAAWkB,KAAX,CAAiBE,IAA9B;AACA,gBAAMP,IAAI,GAAG,KAAKb,KAAL,CAAWkB,KAAX,CAAiBJ,IAAjB,CAAsBC,MAAtB,CAA6B,CAA7B,EAAgCC,WAAhC,EAAb;AAEA,gBAAMN,WAAW,GAAG,KAAKO,cAAL,CAAoBG,IAApB,EAA0BP,IAA1B,CAApB;AACA,eAAKR,QAAL,CAAcK,WAAd;AAEA;AACD;AACD,KAnEkB;;AAAA,SAqEnBL,QArEmB,GAqEPH,KAAD,IAAW;AAErB,UAAImB,GAAG,GAAG,IAAIC,KAAJ,EAAV;AACAD,MAAAA,GAAG,CAACE,GAAJ,GAAUrB,KAAV;;AACAmB,MAAAA,GAAG,CAACG,MAAJ,GAAa,MAAM;AAElB,YAAI,KAAKC,UAAT,EAAqB;AACpB,eAAKC,QAAL,CAAc;AAAEhB,YAAAA,WAAW,EAAER;AAAf,WAAd;AACA;AACD,OALD;AAOA,KAhFkB;;AAAA,SAkFnBe,cAlFmB,GAkFF,CAACU,SAAD,EAAYC,IAAZ,KAAqB;AAErC,YAAMC,cAAc,GAAG,UAAUC,GAAV,EAAe;AAErC,YAAIC,IAAI,GAAG,CAAX;;AACA,aAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,GAAG,CAAC1B,MAAxB,EAAgC4B,CAAC,EAAjC,EAAqC;AACpCD,UAAAA,IAAI,GAAGD,GAAG,CAACG,UAAJ,CAAeD,CAAf,KAAqB,CAACD,IAAI,IAAI,CAAT,IAAcA,IAAnC,CAAP;AACA;;AAED,YAAIG,MAAM,GAAG,GAAb;;AACA,aAAK,IAAIF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC3B,cAAIG,KAAK,GAAIJ,IAAI,IAAKC,CAAC,GAAG,CAAd,GAAoB,IAAhC;AACAE,UAAAA,MAAM,IAAI,CAAC,OAAOC,KAAK,CAACC,QAAN,CAAe,EAAf,CAAR,EAA4BC,MAA5B,CAAmC,CAAC,CAApC,CAAV;AACA;;AACD,eAAOH,MAAP;AACA,OAbD;;AAeA,YAAMI,MAAM,GAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAf;AACA,YAAMC,OAAO,GAAGH,MAAM,CAACI,UAAP,CAAkB,IAAlB,CAAhB;AAEAJ,MAAAA,MAAM,CAACK,KAAP,GAAe,GAAf;AACAL,MAAAA,MAAM,CAACM,MAAP,GAAgB,GAAhB,CArBqC,CAuBrC;;AACAH,MAAAA,OAAO,CAACI,SAAR,GAAoBhB,cAAc,CAACF,SAAD,CAAlC;AACAc,MAAAA,OAAO,CAACK,QAAR,CAAiB,CAAjB,EAAoB,CAApB,EAAuBR,MAAM,CAACK,KAA9B,EAAqCL,MAAM,CAACM,MAA5C,EAzBqC,CA2BrC;;AACAH,MAAAA,OAAO,CAACM,IAAR,GAAe,gCAAf;AACAN,MAAAA,OAAO,CAACI,SAAR,GAAoB,OAApB,CA7BqC,CA6BT;;AAC5BJ,MAAAA,OAAO,CAACO,SAAR,GAAoB,QAApB;AACAP,MAAAA,OAAO,CAACQ,YAAR,GAAuB,QAAvB;AACAR,MAAAA,OAAO,CAACS,QAAR,CAAiBtB,IAAjB,EAAuBU,MAAM,CAACK,KAAP,GAAe,CAAtC,EAAyCL,MAAM,CAACM,MAAP,GAAgB,CAAzD;AAEA,aAAON,MAAM,CAACa,SAAP,CAAiB,WAAjB,CAAP;AACA,KArHkB;;AAGlB,SAAKC,MAAL,gBAAc9D,KAAK,CAAC+D,SAAN,EAAd;AACA,SAAK5B,UAAL,GAAkB,KAAlB;AACA,SAAK6B,KAAL,GAAa;AACZ5C,MAAAA,WAAW,EAAEd;AADD,KAAb;AAGA;;AAED2D,EAAAA,iBAAiB,GAAG;AAEnB,SAAK9B,UAAL,GAAkB,IAAlB;AACA,SAAKxB,cAAL;AACA;;AAEDuD,EAAAA,kBAAkB,CAACC,SAAD,EAAY;AAE7B,QAAGA,SAAS,KAAK,KAAKzD,KAAtB,EAA6B;AAE5B,WAAKC,cAAL;AACA;AACD;;AAEDyD,EAAAA,oBAAoB,GAAG;AACtB,SAAKjC,UAAL,GAAkB,KAAlB;AACA;;AA6FDkC,EAAAA,MAAM,GAAG;AAER,UAAMC,WAAW,GAAG,KAAK5D,KAAL,CAAW4D,WAA/B;AACA,UAAMC,WAAW,GAAG,KAAK7D,KAAL,CAAW6D,WAA/B;AACA,UAAMC,WAAW,GAAG,KAAK9D,KAAL,CAAW8D,WAA/B;AACA,UAAMC,YAAY,GAAG,KAAK/D,KAAL,CAAW+D,YAAhC;;AAEA,UAAMC,QAAQ,GAAG,OAAO;AAAEJ,MAAAA,WAAW,EAAEA,WAAf;AAA4BC,MAAAA,WAAW,EAAEA,WAAzC;AAAsDC,MAAAA,WAAW,EAAEA,WAAnE;AAAgFG,MAAAA,YAAY,EAAEF;AAA9F,KAAP,CAAjB;;AAEA,WACC;AAAK,MAAA,GAAG,EAAE,KAAKT,KAAL,CAAW5C,WAArB;AAAkC,MAAA,GAAG,EAAEf,QAAQ,EAA/C;AAAmD,MAAA,GAAG,EAAE,KAAK2D,KAAL,CAAW5C,WAAnE;AAAgF,MAAA,KAAK,EAAEsD,QAAQ,EAA/F;AAAmG,MAAA,GAAG,EAAEE,EAAE,IAAI;AAAE,aAAKd,MAAL,GAAcc,EAAd;AAAkB,OAAlI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD;AAGA;;AArI4C,C,CAwI9C;;;AACArE,eAAe,CAACsE,YAAhB,GAA+B;AAC9BP,EAAAA,WAAW,EAAE,KADiB;AAE9BC,EAAAA,WAAW,EAAE,OAFiB;AAG9BC,EAAAA,WAAW,EAAEpE,KAAK,CAACoE,WAAN,CAAkBM,OAHD;AAI9BL,EAAAA,YAAY,EAAE,KAJgB;AAK9BrE,EAAAA,KAAK,EAAEA,KALuB;AAM9BQ,EAAAA,KAAK,EAAE,EANuB;AAO9BM,EAAAA,IAAI,EAAE,EAPwB;AAQ9BU,EAAAA,KAAK,EAAE;AARuB,CAA/B;AAWArB,eAAe,CAACwE,SAAhB,GAA4B;AAC3BT,EAAAA,WAAW,EAAEpE,SAAS,CAAC8E,MADI;AAE3BT,EAAAA,WAAW,EAAErE,SAAS,CAAC8E,MAFI;AAG3BR,EAAAA,WAAW,EAAEtE,SAAS,CAAC8E,MAHI;AAI3BP,EAAAA,YAAY,EAAEvE,SAAS,CAAC8E,MAJG;AAK3BpE,EAAAA,KAAK,EAAEV,SAAS,CAAC8E,MALU;AAM3B5E,EAAAA,KAAK,EAAEF,SAAS,CAAC+E,MANU;AAO3B/D,EAAAA,IAAI,EAAEhB,SAAS,CAACgF,SAAV,CAAoB,CAAChF,SAAS,CAAC+E,MAAX,EAAmB/E,SAAS,CAACiF,KAAV,CAAgBhF,SAAS,CAACiF,IAA1B,CAAnB,CAApB,CAPqB;AAQ3BxD,EAAAA,KAAK,EAAE1B,SAAS,CAACgF,SAAV,CAAoB,CAAChF,SAAS,CAAC+E,MAAX,EAAmB/E,SAAS,CAACiF,KAAV,CAAgBhF,SAAS,CAACkF,KAA1B,CAAnB,CAApB;AARoB,CAA5B;AAWA,SAAS9E,eAAT","sourcesContent":["import React from \"react\";\n/** @jsxRuntime classic */\n/** @jsx jsx */\nimport { jsx } from \"@emotion/core\";\nimport PropTypes from \"prop-types\";\nimport { CometChat } from \"@cometchat-pro/chat\";\n\nimport { theme } from \"../../../resources/theme\";\n\nimport { imgStyle } from \"./style\";\n\nimport srcIcon from \"./resources/1px.png\";\n\nclass CometChatAvatar extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.imgRef = React.createRef();\n\t\tthis._isMounted = false;\n\t\tthis.state = {\n\t\t\tavatarImage: srcIcon\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\n\t\tthis._isMounted = true;\n\t\tthis.setAvatarImage();\n\t}\n\n\tcomponentDidUpdate(prevProps) {\n\n\t\tif(prevProps !== this.props) {\n\n\t\t\tthis.setAvatarImage();\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis._isMounted = false;\n\t}\n\n\tsetAvatarImage = () => {\n\n\t\tif ((this.props.image).trim().length) {\n\n\t\t\tthis.getImage(this.props.image);\n\n\t\t} else if (Object.keys(this.props.user).length) {\n\n\t\t\tif (this.props.user.hasOwnProperty(\"avatar\")) {\n\n\t\t\t\tconst avatarImage = this.props.user.avatar;\n\t\t\t\tthis.getImage(avatarImage);\n\n\t\t\t} else {\n\n\t\t\t\tconst uid = this.props.user.uid;\n\t\t\t\tconst char = this.props.user.name.charAt(0).toUpperCase();\n\n\t\t\t\tconst avatarImage = this.generateAvatar(uid, char);\n\t\t\t\tthis.getImage(avatarImage);\n\t\t\t}\n\n\t\t} else if (Object.keys(this.props.group).length) {\n\n\t\t\tif (this.props.group.hasOwnProperty(\"icon\")) {\n\n\t\t\t\tconst avatarImage = this.props.group.icon;\n\t\t\t\tthis.getImage(avatarImage);\n\n\t\t\t} else {\n\n\t\t\t\tconst guid = this.props.group.guid;\n\t\t\t\tconst char = this.props.group.name.charAt(0).toUpperCase();\n\n\t\t\t\tconst avatarImage = this.generateAvatar(guid, char);\n\t\t\t\tthis.getImage(avatarImage);\n\n\t\t\t}\n\t\t}\n\t}\n\n\tgetImage = (image) => {\n\n\t\tlet img = new Image();\n\t\timg.src = image;\n\t\timg.onload = () => {\n\n\t\t\tif (this._isMounted) {\n\t\t\t\tthis.setState({ avatarImage: image });\n\t\t\t}\n\t\t}\n\t\t\n\t}\n\n\tgenerateAvatar = (generator, data) => {\n\n\t\tconst stringToColour = function (str) {\n\n\t\t\tlet hash = 0;\n\t\t\tfor (let i = 0; i < str.length; i++) {\n\t\t\t\thash = str.charCodeAt(i) + ((hash << 5) - hash);\n\t\t\t}\n\n\t\t\tlet colour = '#';\n\t\t\tfor (let i = 0; i < 3; i++) {\n\t\t\t\tlet value = (hash >> (i * 8)) & 0xFF;\n\t\t\t\tcolour += ('00' + value.toString(16)).substr(-2);\n\t\t\t}\n\t\t\treturn colour;\n\t\t}\n\n\t\tconst canvas = document.createElement(\"canvas\");\n\t\tconst context = canvas.getContext(\"2d\");\n\n\t\tcanvas.width = 200;\n\t\tcanvas.height = 200;\n\n\t\t// Draw background\n\t\tcontext.fillStyle = stringToColour(generator);\n\t\tcontext.fillRect(0, 0, canvas.width, canvas.height);\n\n\t\t// Draw text\n\t\tcontext.font = \"bold 100px 'Inter', sans-serif\";\n\t\tcontext.fillStyle = \"white\";//foregroundColor;\n\t\tcontext.textAlign = \"center\";\n\t\tcontext.textBaseline = \"middle\";\n\t\tcontext.fillText(data, canvas.width / 2, canvas.height / 2);\n\n\t\treturn canvas.toDataURL(\"image/png\");\n\t}\n\n\trender() {\n\n\t\tconst borderWidth = this.props.borderWidth;\n\t\tconst borderStyle = this.props.borderStyle;\n\t\tconst borderColor = this.props.borderColor;\n\t\tconst cornerRadius = this.props.cornerRadius;\n\n\t\tconst getStyle = () => ({ borderWidth: borderWidth, borderStyle: borderStyle, borderColor: borderColor, borderRadius: cornerRadius });\n\n\t\treturn (\n\t\t\t<img src={this.state.avatarImage} css={imgStyle()} alt={this.state.avatarImage} style={getStyle()} ref={el => { this.imgRef = el;}} />\n\t\t);\n\t}\n}\n\n// Specifies the default values for props:\nCometChatAvatar.defaultProps = {\n\tborderWidth: \"1px\",\n\tborderStyle: \"solid\",\n\tborderColor: theme.borderColor.primary,\n\tcornerRadius: \"50%\",\n\ttheme: theme,\n\timage: \"\",\n\tuser: {},\n\tgroup: {},\n};\n\nCometChatAvatar.propTypes = {\n\tborderWidth: PropTypes.string,\n\tborderStyle: PropTypes.string,\n\tborderColor: PropTypes.string,\n\tcornerRadius: PropTypes.string,\n\timage: PropTypes.string,\n\ttheme: PropTypes.object,\n\tuser: PropTypes.oneOfType([PropTypes.object, PropTypes.shape(CometChat.User)]),\n\tgroup: PropTypes.oneOfType([PropTypes.object, PropTypes.shape(CometChat.Group)])\n}\n\nexport { CometChatAvatar };"]},"metadata":{},"sourceType":"module"}