{"ast":null,"code":"var _jsxFileName = \"/Users/timmereeestes/Desktop/Keaton/family_messaging/client/src/CometChatWorkspace/src/components/Messages/CometChatMessageHeader/index.js\";\nimport React from \"react\";\nimport dateFormat from \"dateformat\";\n/** @jsxRuntime classic */\n\n/** @jsx jsx */\n\nimport { jsx } from \"@emotion/core\";\nimport PropTypes from \"prop-types\";\nimport { CometChat } from \"@cometchat-pro/chat\";\nimport { MessageHeaderManager } from \"./controller\";\nimport { CometChatAvatar, CometChatUserPresence } from \"../../Shared\";\nimport { CometChatContext } from \"../../../util/CometChatContext\";\nimport * as enums from \"../../../util/enums.js\";\nimport { theme } from \"../../../resources/theme\";\nimport Translator from \"../../../resources/localization/translator\";\nimport { chatHeaderStyle, chatDetailStyle, chatSideBarBtnStyle, chatThumbnailStyle, chatUserStyle, chatNameStyle, chatStatusStyle, chatOptionWrapStyle, chatOptionStyle } from \"./style\";\nimport menuIcon from \"./resources/menu.svg\";\nimport audioCallIcon from \"./resources/audio-call.svg\";\nimport videoCallIcon from \"./resources/video-call.svg\";\nimport detailPaneIcon from \"./resources/info.svg\";\n\nclass CometChatMessageHeader extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.setStatusForUser = () => {\n      let status = \"\";\n      const presence = this.context.item.status === CometChat.USER_STATUS.ONLINE ? CometChat.USER_STATUS.ONLINE : CometChat.USER_STATUS.OFFLINE;\n\n      if (this.context.item.status === CometChat.USER_STATUS.OFFLINE && this.context.item.lastActiveAt) {\n        const lastActive = this.context.item.lastActiveAt * 1000;\n        const messageDate = dateFormat(lastActive, \"dS mmm yyyy, h:MM TT\");\n        status = `${Translator.translate(\"LAST_ACTIVE_AT\", this.props.lang)}: ${messageDate}`;\n      } else if (this.context.item.status === CometChat.USER_STATUS.OFFLINE) {\n        status = Translator.translate(\"OFFLINE\", this.props.lang);\n      } else if (this.context.item.status === CometChat.USER_STATUS.ONLINE) {\n        status = Translator.translate(\"ONLINE\", this.props.lang);\n      }\n\n      this.setState({\n        status: status,\n        presence: presence\n      });\n    };\n\n    this.setStatusForGroup = () => {\n      let membersText = Translator.translate(\"MEMBERS\", this.props.lang);\n      const status = `${this.context.item.membersCount} ${membersText}`;\n      this.setState({\n        status: status\n      });\n    };\n\n    this.updateHeader = (key, item, groupUser) => {\n      switch (key) {\n        case enums.USER_ONLINE:\n        case enums.USER_OFFLINE:\n          {\n            if (this.context.type === CometChat.ACTION_TYPE.TYPE_USER && this.context.item.uid === item.uid) {\n              //if user presence feature is disabled\n              if (this.state.enableUserPresence === false) {\n                return false;\n              }\n\n              let status = \"\";\n\n              if (item.status === CometChat.USER_STATUS.OFFLINE) {\n                status = Translator.translate(\"OFFLINE\", this.props.lang);\n              } else if (item.status === CometChat.USER_STATUS.ONLINE) {\n                status = Translator.translate(\"ONLINE\", this.props.lang);\n              }\n\n              this.setState({\n                status: status,\n                presence: item.status\n              });\n            }\n\n            break;\n          }\n\n        case enums.GROUP_MEMBER_KICKED:\n        case enums.GROUP_MEMBER_BANNED:\n        case enums.GROUP_MEMBER_LEFT:\n          if (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP && this.context.item.guid === item.guid && this.loggedInUser.uid !== groupUser.uid) {\n            let membersCount = parseInt(item.membersCount);\n            const status = `${membersCount} ${Translator.translate(\"MEMBERS\", this.props.lang)}`;\n            this.setState({\n              status: status\n            });\n          }\n\n          break;\n\n        case enums.GROUP_MEMBER_JOINED:\n          if (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP && this.context.item.guid === item.guid) {\n            let membersCount = parseInt(item.membersCount);\n            const status = `${membersCount} ${Translator.translate(\"MEMBERS\", this.props.lang)}`;\n            this.setState({\n              status: status\n            });\n          }\n\n          break;\n\n        case enums.GROUP_MEMBER_ADDED:\n          if (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP && this.context.item.guid === item.guid) {\n            let membersCount = parseInt(item.membersCount);\n            const status = `${membersCount} ${Translator.translate(\"MEMBERS\", this.props.lang)}`;\n            this.setState({\n              status: status\n            });\n          }\n\n          break;\n\n        case enums.TYPING_STARTED:\n          this.onTypingStarted(item);\n          break;\n\n        case enums.TYPING_ENDED:\n          this.onTypingEnded(item);\n          break;\n\n        default:\n          break;\n      }\n    };\n\n    this.onTypingStarted = item => {\n      const showTyping = typingText => {\n        /**\n         * if metadata is available, show live reactions else show typing\n         */\n        if (item.hasOwnProperty(\"metadata\") && item.metadata && item.metadata.hasOwnProperty(\"type\") && item.metadata.type === enums.CONSTANTS[\"METADATA_TYPE_LIVEREACTION\"]) {\n          this.props.actionGenerated(enums.ACTIONS[\"SHOW_LIVE_REACTION\"], item);\n        } else {\n          if (this.state.enableTypingIndicator === true) {\n            this.setState({\n              typing: typingText\n            });\n          }\n        }\n      };\n\n      if (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP && this.context.type === item.receiverType && this.context.item.guid === item.receiverId) {\n        const typingText = `${item.sender.name} ${Translator.translate(\"IS_TYPING\", this.props.lang)}`;\n        showTyping(typingText);\n      } else if (this.context.type === CometChat.ACTION_TYPE.TYPE_USER && this.context.type === item.receiverType && this.context.item.uid === item.sender.uid) {\n        const typingText = `${Translator.translate(\"TYPING\", this.props.lang)}`;\n        showTyping(typingText);\n      }\n    };\n\n    this.onTypingEnded = item => {\n      const endTyping = () => {\n        /**\n         * if metadata is available, end live reactions else end typing\n         */\n        if (item.hasOwnProperty(\"metadata\") && item.metadata && item.metadata.hasOwnProperty(\"type\") && item.metadata.type === enums.CONSTANTS[\"METADATA_TYPE_LIVEREACTION\"]) {\n          this.props.actionGenerated(enums.ACTIONS[\"STOP_LIVE_REACTION\"], item);\n        } else {\n          if (this.state.enableTypingIndicator === true) {\n            this.setState({\n              typing: null\n            });\n          }\n        }\n      };\n\n      if (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP && this.context.type === item.receiverType && this.context.item.guid === item.receiverId) {\n        this.setStatusForGroup();\n        endTyping();\n      } else if (this.context.type === CometChat.ACTION_TYPE.TYPE_USER && this.context.type === item.receiverType && this.context.item.uid === item.sender.uid) {\n        if (this.state.presence === CometChat.USER_STATUS.ONLINE) {\n          this.setState({\n            status: Translator.translate(\"ONLINE\", this.props.lang),\n            presence: CometChat.USER_STATUS.ONLINE\n          });\n        } else {\n          this.setStatusForUser();\n        }\n\n        endTyping();\n      }\n    };\n\n    this.toggleTooltip = (event, flag) => {\n      const elem = event.target;\n      const scrollWidth = elem.scrollWidth;\n      const clientWidth = elem.clientWidth;\n\n      if (scrollWidth <= clientWidth) {\n        return false;\n      }\n\n      if (flag) {\n        elem.setAttribute(\"title\", elem.textContent);\n      } else {\n        elem.removeAttribute(\"title\");\n      }\n    };\n\n    this.resetChat = () => {\n      this.context.setItem({});\n      this.props.actionGenerated(enums.ACTIONS[\"TOGGLE_SIDEBAR\"]);\n    };\n\n    this.enableTypingIndicator = () => {\n      this.context.FeatureRestriction.isTypingIndicatorsEnabled().then(response => {\n        if (response !== this.state.enableTypingIndicator) {\n          this.setState({\n            enableTypingIndicator: response\n          });\n        }\n      }).catch(error => {\n        if (this.state.enableTypingIndicator !== false) {\n          this.setState({\n            enableTypingIndicator: false\n          });\n        }\n      });\n    };\n\n    this.enableGroupVoiceCall = () => {};\n\n    this.enableGroupVideoCall = () => {\n      this.context.FeatureRestriction.isGroupVideoCallEnabled().then(response => {\n        /**\n         * Don't update state if the response has the same value\n         */\n        if (response !== this.state.enableGroupVideoCall) {\n          this.setState({\n            enableGroupVideoCall: response\n          });\n        }\n      }).catch(error => {\n        if (this.state.enableGroupVideoCall !== false) {\n          this.setState({\n            enableGroupVideoCall: false\n          });\n        }\n      });\n    };\n\n    this.enableOneOnOneVoiceCall = () => {\n      this.context.FeatureRestriction.isOneOnOneAudioCallEnabled().then(response => {\n        /**\n         * Don't update state if the response has the same value\n         */\n        const combinedResponse = response && !this.context.item.blockedByMe;\n\n        if (combinedResponse !== this.state.enableOneOnOneVoiceCall) {\n          this.setState({\n            enableOneOnOneVoiceCall: combinedResponse\n          });\n        }\n      }).catch(error => {\n        if (this.state.enableOneOnOneVoiceCall !== false) {\n          this.setState({\n            enableOneOnOneVoiceCall: false\n          });\n        }\n      });\n    };\n\n    this.enableOneOnOneVideoCall = () => {\n      this.context.FeatureRestriction.isOneOnOneVideoCallEnabled().then(response => {\n        /**\n         * Don't update state if the response has the same value\n         */\n        const combinedResponse = response && !this.context.item.blockedByMe;\n\n        if (combinedResponse !== this.state.enableOneOnOneVideoCall) {\n          this.setState({\n            enableOneOnOneVideoCall: combinedResponse\n          });\n        }\n      }).catch(error => {\n        if (this.state.enableOneOnOneVideoCall !== false) {\n          this.setState({\n            enableOneOnOneVideoCall: false\n          });\n        }\n      });\n    };\n\n    this.enableUserPresence = () => {\n      this.context.FeatureRestriction.isUserPresenceEnabled().then(response => {\n        if (response !== this.state.enableUserPresence) {\n          this.setState({\n            enableUserPresence: response\n          });\n        }\n      }).catch(error => {\n        if (this.state.enableUserPresence !== false) {\n          this.setState({\n            enableUserPresence: false\n          });\n        }\n      });\n    };\n\n    this.enableAddGroupMembers = () => {\n      this.context.FeatureRestriction.isAddingGroupMembersEnabled().then(response => {\n        /**\n         * Don't update state if the response has the same value\n         */\n        if (response !== this.state.enableAddGroupMembers) {\n          this.setState({\n            enableAddGroupMembers: response\n          });\n        }\n      }).catch(error => {\n        if (this.state.enableAddGroupMembers !== false) {\n          this.setState({\n            enableAddGroupMembers: false\n          });\n        }\n      });\n    };\n\n    this.enableChangeScope = () => {\n      this.context.FeatureRestriction.isChangingGroupMemberScopeEnabled().then(response => {\n        /**\n         * Don't update state if the response has the same value\n         */\n        if (response !== this.state.enableChangeScope) {\n          this.setState({\n            enableChangeScope: response\n          });\n        }\n      }).catch(error => {\n        if (this.state.enableChangeScope !== false) {\n          this.setState({\n            enableChangeScope: false\n          });\n        }\n      });\n    };\n\n    this.enableKickGroupMembers = () => {\n      this.context.FeatureRestriction.isKickingGroupMembersEnabled().then(response => {\n        /**\n         * Don't update state if the response has the same value\n         */\n        if (response !== this.state.enableKickGroupMembers) {\n          this.setState({\n            enableKickGroupMembers: response\n          });\n        }\n      }).catch(error => {\n        if (this.state.enableKickGroupMembers !== false) {\n          this.setState({\n            enableKickGroupMembers: false\n          });\n        }\n      });\n    };\n\n    this.enableBanGroupMembers = () => {\n      this.context.FeatureRestriction.isBanningGroupMembersEnabled().then(response => {\n        /**\n         * Don't update state if the response has the same value\n         */\n        if (response !== this.state.enableBanGroupMembers) {\n          this.setState({\n            enableBanGroupMembers: response\n          });\n        }\n      }).catch(error => {\n        if (this.state.enableBanGroupMembers !== false) {\n          this.setState({\n            enableBanGroupMembers: false\n          });\n        }\n      });\n    };\n\n    this.enableDeleteGroup = () => {\n      this.context.FeatureRestriction.isGroupDeletionEnabled().then(response => {\n        /**\n         * Don't update state if the response has the same value\n         */\n        if (response !== this.state.enableDeleteGroup) {\n          this.setState({\n            enableDeleteGroup: response\n          });\n        }\n      }).catch(error => {\n        if (this.state.enableDeleteGroup !== false) {\n          this.setState({\n            enableDeleteGroup: false\n          });\n        }\n      });\n    };\n\n    this.enableViewGroupMembers = () => {\n      this.context.FeatureRestriction.isViewingGroupMembersEnabled().then(response => {\n        /**\n         * Don't update state if the response has the same value\n         */\n        if (response !== this.state.enableViewGroupMembers) {\n          this.setState({\n            enableViewGroupMembers: response\n          });\n        }\n      }).catch(error => {\n        if (this.state.enableViewGroupMembers !== false) {\n          this.setState({\n            enableViewGroupMembers: false\n          });\n        }\n      });\n    };\n\n    this.enableLeaveGroup = () => {\n      this.context.FeatureRestriction.isJoinLeaveGroupsEnabled().then(response => {\n        /**\n         * Don't update state if the response has the same value\n         */\n        if (response !== this.state.enableLeaveGroup) {\n          this.setState({\n            enableLeaveGroup: response\n          });\n        }\n      }).catch(error => {\n        if (this.state.enableLeaveGroup !== false) {\n          this.setState({\n            enableLeaveGroup: false\n          });\n        }\n      });\n    };\n\n    this.enableSharedMedia = () => {\n      this.context.FeatureRestriction.isSharedMediaEnabled().then(response => {\n        /**\n         * Don't update state if the response has the same value\n         */\n        if (response !== this.state.enableSharedMedia) {\n          this.setState({\n            enableSharedMedia: response\n          });\n        }\n      }).catch(error => {\n        if (this.state.enableSharedMedia !== false) {\n          this.setState({\n            enableSharedMedia: false\n          });\n        }\n      });\n    };\n\n    this.enableBlockUser = () => {\n      this.context.FeatureRestriction.isBlockUserEnabled().then(response => {\n        /**\n         * Don't update state if the response has the same value\n         */\n        if (response !== this.state.enableBlockUser) {\n          this.setState({\n            enableBlockUser: response\n          });\n        }\n      }).catch(error => {\n        if (this.state.enableBlockUser !== false) {\n          this.setState({\n            enableBlockUser: false\n          });\n        }\n      });\n    };\n\n    this.state = {\n      status: \"\",\n      presence: \"offline\",\n      typing: null,\n      enableGroupVoiceCall: false,\n      enableGroupVideoCall: false,\n      enableOneOnOneVoiceCall: false,\n      enableOneOnOneVideoCall: false,\n      enableUserPresence: false,\n      enableAddGroupMembers: false,\n      enableChangeScope: false,\n      enableKickGroupMembers: false,\n      enableBanGroupMembers: false,\n      enableDeleteGroup: false,\n      enableViewGroupMembers: false,\n      enableLeaveGroup: false,\n      enableSharedMedia: false,\n      enableBlockUser: false,\n      enableTypingIndicator: false\n    };\n  }\n\n  componentDidMount() {\n    CometChat.getLoggedinUser().then(user => this.loggedInUser = user).catch(error => this.props.actionGenerated(enums.ACTIONS[\"ERROR\"], [], \"SOMETHING_WRONG\"));\n    this.MessageHeaderManager = new MessageHeaderManager();\n    this.MessageHeaderManager.attachListeners(this.updateHeader);\n\n    if (this.context.type === CometChat.ACTION_TYPE.TYPE_USER) {\n      this.setStatusForUser();\n    } else if (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP) {\n      this.setStatusForGroup();\n    }\n\n    this.item = this.context.item;\n    this.enableGroupVoiceCall();\n    this.enableGroupVideoCall();\n    this.enableOneOnOneVoiceCall();\n    this.enableOneOnOneVideoCall();\n    this.enableUserPresence();\n    this.enableAddGroupMembers();\n    this.enableChangeScope();\n    this.enableKickGroupMembers();\n    this.enableBanGroupMembers();\n    this.enableViewGroupMembers();\n    this.enableDeleteGroup();\n    this.enableLeaveGroup();\n    this.enableSharedMedia();\n    this.enableBlockUser();\n    this.enableTypingIndicator();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    this.MessageHeaderManager.removeListeners();\n    this.MessageHeaderManager = new MessageHeaderManager();\n    this.MessageHeaderManager.attachListeners(this.updateHeader);\n\n    if (this.context.type === CometChat.ACTION_TYPE.TYPE_USER && (this.item !== this.context.item || prevProps.lang !== this.props.lang)) {\n      this.setStatusForUser();\n    } else if (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP && (this.item !== this.context.item || prevProps.lang !== this.props.lang)) {\n      this.setStatusForGroup();\n    }\n\n    this.item = this.context.item;\n    this.enableGroupVoiceCall();\n    this.enableGroupVideoCall();\n    this.enableOneOnOneVoiceCall();\n    this.enableOneOnOneVideoCall();\n    this.enableUserPresence();\n    this.enableAddGroupMembers();\n    this.enableChangeScope();\n    this.enableKickGroupMembers();\n    this.enableBanGroupMembers();\n    this.enableViewGroupMembers();\n    this.enableDeleteGroup();\n    this.enableLeaveGroup();\n    this.enableSharedMedia();\n    this.enableBlockUser();\n    this.enableTypingIndicator();\n  }\n\n  componentWillUnmount() {\n    this.MessageHeaderManager.removeListeners();\n    this.MessageHeaderManager = null;\n  }\n\n  render() {\n    let avatar, presence;\n    let videoCallClassName = \"option__videocall-user\";\n    let audioCallClassName = \"option__audiocall-user\";\n    let viewDetailClassName = \"option__viewdetail-user\";\n    let chatWithClassName = \"chat__user\";\n    let chatNameClassName = \"user__name\";\n    let chatStatusClassName = \"user__status\";\n\n    if (this.context.type === CometChat.ACTION_TYPE.TYPE_USER) {\n      avatar = jsx(CometChatAvatar, {\n        user: this.context.item,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 543,\n          columnNumber: 13\n        }\n      });\n      presence = jsx(CometChatUserPresence, {\n        status: this.state.presence,\n        borderColor: this.props.theme.borderColor.primary,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 544,\n          columnNumber: 15\n        }\n      });\n    } else if (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP) {\n      chatWithClassName = \"chat__group\";\n      chatNameClassName = \"group__name\";\n      chatStatusClassName = \"group__members\";\n      videoCallClassName = \"option__videocall-group\";\n      audioCallClassName = \"option__audiocall-group\";\n      viewDetailClassName = \"option__viewdetail-group\";\n      avatar = jsx(CometChatAvatar, {\n        group: this.context.item,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 552,\n          columnNumber: 13\n        }\n      });\n    }\n\n    let typing = null;\n\n    if (this.state.typing) {\n      typing = jsx(\"span\", {\n        css: chatStatusStyle(this.state, this.context),\n        className: chatStatusClassName,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 558,\n          columnNumber: 5\n        }\n      }, this.state.typing);\n    }\n\n    let status = jsx(\"span\", {\n      css: chatStatusStyle(this.state, this.context),\n      className: chatStatusClassName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 565,\n        columnNumber: 4\n      }\n    }, this.state.status);\n    const audioCallText = Translator.translate(\"AUDIO_CALL\", this.props.lang);\n    let audioCallBtn = jsx(\"div\", {\n      className: audioCallClassName,\n      css: chatOptionStyle(audioCallIcon, this.context, 0),\n      title: audioCallText,\n      onClick: () => this.props.actionGenerated(enums.ACTIONS[\"INITIATE_AUDIO_CALL\"]),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 572,\n        columnNumber: 4\n      }\n    }, jsx(\"i\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 573,\n        columnNumber: 5\n      }\n    }));\n\n    if (this.context.checkIfCallIsOngoing()) {\n      const audioCallText = Translator.translate(\"YOU_ALREADY_ONGOING_CALL\", this.props.lang);\n      audioCallBtn = jsx(\"div\", {\n        className: audioCallClassName,\n        css: chatOptionStyle(audioCallIcon, this.context, 1),\n        title: audioCallText,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 580,\n          columnNumber: 5\n        }\n      }, jsx(\"i\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 581,\n          columnNumber: 6\n        }\n      }));\n    }\n\n    const videoCallText = Translator.translate(\"VIDEO_CALL\", this.props.lang);\n    let videoCallBtn = jsx(\"div\", {\n      className: videoCallClassName,\n      css: chatOptionStyle(videoCallIcon, this.context, 0),\n      title: videoCallText,\n      onClick: () => this.props.actionGenerated(enums.ACTIONS[\"INITIATE_VIDEO_CALL\"]),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 588,\n        columnNumber: 4\n      }\n    }, jsx(\"i\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 589,\n        columnNumber: 5\n      }\n    }));\n\n    if (this.context.checkIfCallIsOngoing()) {\n      const videoCallText = Translator.translate(\"YOU_ALREADY_ONGOING_CALL\", this.props.lang);\n      videoCallBtn = jsx(\"div\", {\n        className: videoCallClassName,\n        css: chatOptionStyle(videoCallIcon, this.context, 1),\n        title: videoCallText,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 596,\n          columnNumber: 5\n        }\n      }, jsx(\"i\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 597,\n          columnNumber: 6\n        }\n      }));\n    }\n\n    const viewDetailText = Translator.translate(\"VIEW_DETAIL\", this.props.lang);\n    let viewDetailBtn = jsx(\"div\", {\n      className: viewDetailClassName,\n      css: chatOptionStyle(detailPaneIcon, this.context, 0),\n      title: viewDetailText,\n      onClick: () => this.props.actionGenerated(enums.ACTIONS[\"VIEW_DETAIL\"]),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 604,\n        columnNumber: 4\n      }\n    }, jsx(\"i\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 605,\n        columnNumber: 5\n      }\n    }));\n    /**\n     * If the chat window open is of users and block user and shared media feature is disabled, hide view detail button\n     */\n\n    if (this.context.type === CometChat.ACTION_TYPE.TYPE_USER) {\n      if (this.state.enableBlockUser === false && this.state.enableSharedMedia === false) {\n        viewDetailBtn = null;\n      }\n    } else if (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP) {\n      var _this$context$item, _this$context$item2, _this$context$item3;\n\n      /**\n       * If the chat window open is of group\n       */\n      if (((_this$context$item = this.context.item) === null || _this$context$item === void 0 ? void 0 : _this$context$item.scope) === CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT) {\n        /**\n         * If the loggedin user scope is participant, leave group, view group members, and shared media feature is disabled, hide view detail button\n         */\n        if (this.state.enableLeaveGroup === false && this.state.enableSharedMedia === false && this.state.enableViewGroupMembers === false) {\n          viewDetailBtn = null;\n        }\n      } else if (((_this$context$item2 = this.context.item) === null || _this$context$item2 === void 0 ? void 0 : _this$context$item2.scope) === CometChat.GROUP_MEMBER_SCOPE.MODERATOR) {\n        /**\n         * If the loggedin user scope is moderator, leave group, view group members, kick & ban group members, changing scope of group members and shared media feature is disabled, hide view detail button\n         */\n        if (this.state.enableLeaveGroup === false && this.state.enableSharedMedia === false && this.state.enableViewGroupMembers === false && this.state.enableKickGroupMembers === false && this.state.enableBanGroupMembers === false && this.state.enableChangeScope === false) {\n          viewDetailBtn = null;\n        }\n      } else if (((_this$context$item3 = this.context.item) === null || _this$context$item3 === void 0 ? void 0 : _this$context$item3.scope) === CometChat.GROUP_MEMBER_SCOPE.ADMIN) {\n        /**\n         * If the loggedin user scope is admin, add group members, view group members, kick & ban group members, changing scope of group members, leave and delete group and shared media feature is disabled, hide view detail button\n         */\n        if (this.state.enableLeaveGroup === false && this.state.enableSharedMedia === false && this.state.enableViewGroupMembers === false && this.state.enableKickGroupMembers === false && this.state.enableBanGroupMembers === false && this.state.enableChangeScope === false && this.state.enableDeleteGroup === false && this.state.enableAddGroupMembers === false) {\n          viewDetailBtn = null;\n        }\n      }\n    } //if audiocall feature is disabled\n\n\n    if (this.context.type === CometChat.ACTION_TYPE.TYPE_USER && this.state.enableOneOnOneVoiceCall === false || this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP && this.state.enableGroupVoiceCall === false) {\n      audioCallBtn = null;\n    } //if videocall feature is disabled\n\n\n    if (this.context.type === CometChat.ACTION_TYPE.TYPE_USER && this.state.enableOneOnOneVideoCall === false || this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP && this.state.enableGroupVideoCall === false) {\n      videoCallBtn = null;\n    } //if user presence is disabled in chat widget\n\n\n    if (this.state.enableUserPresence === false && this.context.type === CometChat.ACTION_TYPE.TYPE_USER) {\n      status = null;\n    }\n\n    return jsx(\"div\", {\n      css: chatHeaderStyle(this.context),\n      className: \"chat__header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 669,\n        columnNumber: 4\n      }\n    }, jsx(\"div\", {\n      css: chatDetailStyle(),\n      className: \"chat__details\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 670,\n        columnNumber: 5\n      }\n    }, jsx(\"div\", {\n      css: chatSideBarBtnStyle(menuIcon, this.props, this.context),\n      className: \"chat__sidebar-menu\",\n      onClick: this.resetChat,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 671,\n        columnNumber: 6\n      }\n    }), jsx(\"div\", {\n      css: chatThumbnailStyle(),\n      className: \"chat__thumbnail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 672,\n        columnNumber: 6\n      }\n    }, avatar, presence), jsx(\"div\", {\n      css: chatUserStyle(this.context),\n      className: chatWithClassName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 676,\n        columnNumber: 6\n      }\n    }, jsx(\"h6\", {\n      css: chatNameStyle(),\n      className: chatNameClassName,\n      onMouseEnter: event => this.toggleTooltip(event, true),\n      onMouseLeave: event => this.toggleTooltip(event, false),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 677,\n        columnNumber: 7\n      }\n    }, this.context.item.name), typing ? typing : status)), jsx(\"div\", {\n      css: chatOptionWrapStyle(),\n      className: \"chat__options\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 683,\n        columnNumber: 5\n      }\n    }, videoCallBtn, audioCallBtn, viewDetailBtn));\n  }\n\n} // Specifies the default values for props:\n\n\nCometChatMessageHeader.contextType = CometChatContext;\nCometChatMessageHeader.defaultProps = {\n  lang: Translator.getDefaultLanguage(),\n  theme: theme,\n  item: {},\n  type: \"\"\n};\nCometChatMessageHeader.propTypes = {\n  lang: PropTypes.string,\n  theme: PropTypes.object,\n  item: PropTypes.object,\n  type: PropTypes.string\n};\nexport { CometChatMessageHeader };","map":{"version":3,"sources":["/Users/timmereeestes/Desktop/Keaton/family_messaging/client/src/CometChatWorkspace/src/components/Messages/CometChatMessageHeader/index.js"],"names":["React","dateFormat","jsx","PropTypes","CometChat","MessageHeaderManager","CometChatAvatar","CometChatUserPresence","CometChatContext","enums","theme","Translator","chatHeaderStyle","chatDetailStyle","chatSideBarBtnStyle","chatThumbnailStyle","chatUserStyle","chatNameStyle","chatStatusStyle","chatOptionWrapStyle","chatOptionStyle","CometChatMessageHeader","Component","constructor","props","setStatusForUser","status","presence","context","item","USER_STATUS","ONLINE","OFFLINE","lastActiveAt","lastActive","messageDate","translate","lang","setState","setStatusForGroup","membersText","membersCount","updateHeader","key","groupUser","USER_ONLINE","USER_OFFLINE","type","ACTION_TYPE","TYPE_USER","uid","state","enableUserPresence","GROUP_MEMBER_KICKED","GROUP_MEMBER_BANNED","GROUP_MEMBER_LEFT","TYPE_GROUP","guid","loggedInUser","parseInt","GROUP_MEMBER_JOINED","GROUP_MEMBER_ADDED","TYPING_STARTED","onTypingStarted","TYPING_ENDED","onTypingEnded","showTyping","typingText","hasOwnProperty","metadata","CONSTANTS","actionGenerated","ACTIONS","enableTypingIndicator","typing","receiverType","receiverId","sender","name","endTyping","toggleTooltip","event","flag","elem","target","scrollWidth","clientWidth","setAttribute","textContent","removeAttribute","resetChat","setItem","FeatureRestriction","isTypingIndicatorsEnabled","then","response","catch","error","enableGroupVoiceCall","enableGroupVideoCall","isGroupVideoCallEnabled","enableOneOnOneVoiceCall","isOneOnOneAudioCallEnabled","combinedResponse","blockedByMe","enableOneOnOneVideoCall","isOneOnOneVideoCallEnabled","isUserPresenceEnabled","enableAddGroupMembers","isAddingGroupMembersEnabled","enableChangeScope","isChangingGroupMemberScopeEnabled","enableKickGroupMembers","isKickingGroupMembersEnabled","enableBanGroupMembers","isBanningGroupMembersEnabled","enableDeleteGroup","isGroupDeletionEnabled","enableViewGroupMembers","isViewingGroupMembersEnabled","enableLeaveGroup","isJoinLeaveGroupsEnabled","enableSharedMedia","isSharedMediaEnabled","enableBlockUser","isBlockUserEnabled","componentDidMount","getLoggedinUser","user","attachListeners","componentDidUpdate","prevProps","prevState","removeListeners","componentWillUnmount","render","avatar","videoCallClassName","audioCallClassName","viewDetailClassName","chatWithClassName","chatNameClassName","chatStatusClassName","borderColor","primary","audioCallText","audioCallBtn","audioCallIcon","checkIfCallIsOngoing","videoCallText","videoCallBtn","videoCallIcon","viewDetailText","viewDetailBtn","detailPaneIcon","scope","GROUP_MEMBER_SCOPE","PARTICIPANT","MODERATOR","ADMIN","menuIcon","contextType","defaultProps","getDefaultLanguage","propTypes","string","object"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport dateFormat from \"dateformat\";\n/** @jsxRuntime classic */\n/** @jsx jsx */\nimport { jsx } from \"@emotion/core\";\nimport PropTypes from \"prop-types\";\nimport { CometChat } from \"@cometchat-pro/chat\";\n\nimport { MessageHeaderManager } from \"./controller\";\n\nimport { CometChatAvatar, CometChatUserPresence } from \"../../Shared\";\n\nimport { CometChatContext } from \"../../../util/CometChatContext\";\nimport * as enums from \"../../../util/enums.js\";\n\nimport { theme } from \"../../../resources/theme\";\nimport Translator from \"../../../resources/localization/translator\";\n\nimport { \n  chatHeaderStyle, \n  chatDetailStyle, \n  chatSideBarBtnStyle, \n  chatThumbnailStyle,\n  chatUserStyle,\n  chatNameStyle,\n  chatStatusStyle,\n  chatOptionWrapStyle,\n  chatOptionStyle\n} from \"./style\";\n\nimport menuIcon from \"./resources/menu.svg\";\nimport audioCallIcon from \"./resources/audio-call.svg\";\nimport videoCallIcon from \"./resources/video-call.svg\";\nimport detailPaneIcon from \"./resources/info.svg\";\n\nclass CometChatMessageHeader extends React.Component {\n\titem;\n\tstatic contextType = CometChatContext;\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tstatus: \"\",\n\t\t\tpresence: \"offline\",\n\t\t\ttyping: null,\n\t\t\tenableGroupVoiceCall: false,\n\t\t\tenableGroupVideoCall: false,\n\t\t\tenableOneOnOneVoiceCall: false,\n\t\t\tenableOneOnOneVideoCall: false,\n\t\t\tenableUserPresence: false,\n\t\t\tenableAddGroupMembers: false,\n\t\t\tenableChangeScope: false,\n\t\t\tenableKickGroupMembers: false,\n\t\t\tenableBanGroupMembers: false,\n\t\t\tenableDeleteGroup: false,\n\t\t\tenableViewGroupMembers: false,\n\t\t\tenableLeaveGroup: false,\n\t\t\tenableSharedMedia: false,\n\t\t\tenableBlockUser: false,\n\t\t\tenableTypingIndicator: false,\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\n\t\tCometChat.getLoggedinUser()\n\t\t\t.then(user => (this.loggedInUser = user))\n\t\t\t.catch(error => this.props.actionGenerated(enums.ACTIONS[\"ERROR\"], [], \"SOMETHING_WRONG\"));\n\n\t\tthis.MessageHeaderManager = new MessageHeaderManager();\n\t\tthis.MessageHeaderManager.attachListeners(this.updateHeader);\n\n\t\tif (this.context.type === CometChat.ACTION_TYPE.TYPE_USER) {\n\t\t\tthis.setStatusForUser();\n\t\t} else if (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP) {\n\t\t\tthis.setStatusForGroup();\n\t\t}\n\n\t\tthis.item = this.context.item;\n\n\t\tthis.enableGroupVoiceCall();\n\t\tthis.enableGroupVideoCall();\n\t\tthis.enableOneOnOneVoiceCall();\n\t\tthis.enableOneOnOneVideoCall();\n\t\tthis.enableUserPresence();\n\t\tthis.enableAddGroupMembers();\n\t\tthis.enableChangeScope();\n\t\tthis.enableKickGroupMembers();\n\t\tthis.enableBanGroupMembers();\n\t\tthis.enableViewGroupMembers();\n\t\tthis.enableDeleteGroup();\n\t\tthis.enableLeaveGroup();\n\t\tthis.enableSharedMedia();\n\t\tthis.enableBlockUser();\n\t\tthis.enableTypingIndicator();\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\tthis.MessageHeaderManager.removeListeners();\n\t\tthis.MessageHeaderManager = new MessageHeaderManager();\n\t\tthis.MessageHeaderManager.attachListeners(this.updateHeader);\n\n\t\tif (this.context.type === CometChat.ACTION_TYPE.TYPE_USER && (this.item !== this.context.item || prevProps.lang !== this.props.lang)) {\n\t\t\tthis.setStatusForUser();\n\t\t} else if (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP && (this.item !== this.context.item || prevProps.lang !== this.props.lang)) {\n\t\t\tthis.setStatusForGroup();\n\t\t}\n\n\t\tthis.item = this.context.item;\n\n\t\tthis.enableGroupVoiceCall();\n\t\tthis.enableGroupVideoCall();\n\t\tthis.enableOneOnOneVoiceCall();\n\t\tthis.enableOneOnOneVideoCall();\n\t\tthis.enableUserPresence();\n\t\tthis.enableAddGroupMembers();\n\t\tthis.enableChangeScope();\n\t\tthis.enableKickGroupMembers();\n\t\tthis.enableBanGroupMembers();\n\t\tthis.enableViewGroupMembers();\n\t\tthis.enableDeleteGroup();\n\t\tthis.enableLeaveGroup();\n\t\tthis.enableSharedMedia();\n\t\tthis.enableBlockUser();\n\t\tthis.enableTypingIndicator();\n\t}\n\n\tsetStatusForUser = () => {\n\t\tlet status = \"\";\n\t\tconst presence = this.context.item.status === CometChat.USER_STATUS.ONLINE ? CometChat.USER_STATUS.ONLINE : CometChat.USER_STATUS.OFFLINE;\n\n\t\tif (this.context.item.status === CometChat.USER_STATUS.OFFLINE && this.context.item.lastActiveAt) {\n\t\t\tconst lastActive = this.context.item.lastActiveAt * 1000;\n\t\t\tconst messageDate = dateFormat(lastActive, \"dS mmm yyyy, h:MM TT\");\n\n\t\t\tstatus = `${Translator.translate(\"LAST_ACTIVE_AT\", this.props.lang)}: ${messageDate}`;\n\t\t} else if (this.context.item.status === CometChat.USER_STATUS.OFFLINE) {\n\t\t\tstatus = Translator.translate(\"OFFLINE\", this.props.lang);\n\t\t} else if (this.context.item.status === CometChat.USER_STATUS.ONLINE) {\n\t\t\tstatus = Translator.translate(\"ONLINE\", this.props.lang);\n\t\t}\n\t\t\n\t\tthis.setState({status: status, presence: presence});\n\t};\n\n\tsetStatusForGroup = () => {\n\t\tlet membersText = Translator.translate(\"MEMBERS\", this.props.lang);\n\t\tconst status = `${this.context.item.membersCount} ${membersText}`;\n\t\tthis.setState({status: status});\n\t};\n\n\tcomponentWillUnmount() {\n\t\tthis.MessageHeaderManager.removeListeners();\n\t\tthis.MessageHeaderManager = null;\n\t}\n\n\tupdateHeader = (key, item, groupUser) => {\n\t\tswitch (key) {\n\t\t\tcase enums.USER_ONLINE:\n\t\t\tcase enums.USER_OFFLINE: {\n\t\t\t\tif (this.context.type === CometChat.ACTION_TYPE.TYPE_USER && this.context.item.uid === item.uid) {\n\t\t\t\t\t\n\t\t\t\t\t//if user presence feature is disabled\n\t\t\t\t\tif (this.state.enableUserPresence === false) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet status = \"\";\n\t\t\t\t\tif (item.status === CometChat.USER_STATUS.OFFLINE) {\n\t\t\t\t\t\tstatus = Translator.translate(\"OFFLINE\", this.props.lang);\n\t\t\t\t\t} else if (item.status === CometChat.USER_STATUS.ONLINE) {\n\t\t\t\t\t\tstatus = Translator.translate(\"ONLINE\", this.props.lang);\n\t\t\t\t\t}\n\t\t\t\t\tthis.setState({status: status, presence: item.status});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase enums.GROUP_MEMBER_KICKED:\n\t\t\tcase enums.GROUP_MEMBER_BANNED:\n\t\t\tcase enums.GROUP_MEMBER_LEFT:\n\t\t\t\tif (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP && this.context.item.guid === item.guid && this.loggedInUser.uid !== groupUser.uid) {\n\t\t\t\t\tlet membersCount = parseInt(item.membersCount);\n\t\t\t\t\tconst status = `${membersCount} ${Translator.translate(\"MEMBERS\", this.props.lang)}`;\n\t\t\t\t\tthis.setState({status: status});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase enums.GROUP_MEMBER_JOINED:\n\t\t\t\tif (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP && this.context.item.guid === item.guid) {\n\t\t\t\t\tlet membersCount = parseInt(item.membersCount);\n\t\t\t\t\tconst status = `${membersCount} ${Translator.translate(\"MEMBERS\", this.props.lang)}`;\n\t\t\t\t\tthis.setState({status: status});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase enums.GROUP_MEMBER_ADDED:\n\t\t\t\tif (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP && this.context.item.guid === item.guid) {\n\t\t\t\t\tlet membersCount = parseInt(item.membersCount);\n\t\t\t\t\tconst status = `${membersCount} ${Translator.translate(\"MEMBERS\", this.props.lang)}`;\n\t\t\t\t\tthis.setState({status: status});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase enums.TYPING_STARTED:\n\t\t\t\tthis.onTypingStarted(item);\n\t\t\t\tbreak;\n\t\t\tcase enums.TYPING_ENDED: \n\t\t\t\tthis.onTypingEnded(item);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tonTypingStarted = item => {\n\n\t\tconst showTyping = typingText => {\n\t\t\t\n\t\t\t/**\n\t\t\t * if metadata is available, show live reactions else show typing\n\t\t\t */\n\t\t\tif (item.hasOwnProperty(\"metadata\") && item.metadata && item.metadata.hasOwnProperty(\"type\") && item.metadata.type === enums.CONSTANTS[\"METADATA_TYPE_LIVEREACTION\"]) {\n\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"SHOW_LIVE_REACTION\"], item);\n\t\t\t} else {\n\n\t\t\t\tif (this.state.enableTypingIndicator === true) {\n\t\t\t\t\tthis.setState({typing: typingText});\n\t\t\t\t} \n\t\t\t}\n\t\t};\n\n\t\tif (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP && this.context.type === item.receiverType && this.context.item.guid === item.receiverId) {\n\t\t\tconst typingText = `${item.sender.name} ${Translator.translate(\"IS_TYPING\", this.props.lang)}`;\n\t\t\tshowTyping(typingText);\n\t\t} else if (this.context.type === CometChat.ACTION_TYPE.TYPE_USER && this.context.type === item.receiverType && this.context.item.uid === item.sender.uid) {\n\t\t\tconst typingText = `${Translator.translate(\"TYPING\", this.props.lang)}`;\n\t\t\tshowTyping(typingText);\n\t\t}\n\t};\n\n\tonTypingEnded = item => {\n\n\t\tconst endTyping = () => {\n\t\t\t/**\n\t\t\t * if metadata is available, end live reactions else end typing\n\t\t\t */\n\t\t\tif (item.hasOwnProperty(\"metadata\") && item.metadata && item.metadata.hasOwnProperty(\"type\") && item.metadata.type === enums.CONSTANTS[\"METADATA_TYPE_LIVEREACTION\"]) {\n\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"STOP_LIVE_REACTION\"], item);\n\t\t\t} else {\n\n\t\t\t\tif (this.state.enableTypingIndicator === true) {\n\t\t\t\t\tthis.setState({typing: null});\n\t\t\t\t} \n\t\t\t}\n\t\t}\n\n\t\tif (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP && this.context.type === item.receiverType && this.context.item.guid === item.receiverId) {\n\t\t\t\n\t\t\tthis.setStatusForGroup();\n\t\t\tendTyping();\n\n\t\t} else if (this.context.type === CometChat.ACTION_TYPE.TYPE_USER && this.context.type === item.receiverType && this.context.item.uid === item.sender.uid) {\n\n\t\t\tif (this.state.presence === CometChat.USER_STATUS.ONLINE) {\n\t\t\t\tthis.setState({status: Translator.translate(\"ONLINE\", this.props.lang), presence: CometChat.USER_STATUS.ONLINE});\n\t\t\t} else {\n\t\t\t\tthis.setStatusForUser();\n\t\t\t}\n\n\t\t\tendTyping();\n\t\t}\n\t};\n\n\ttoggleTooltip = (event, flag) => {\n\t\tconst elem = event.target;\n\t\tconst scrollWidth = elem.scrollWidth;\n\t\tconst clientWidth = elem.clientWidth;\n\n\t\tif (scrollWidth <= clientWidth) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (flag) {\n\t\t\telem.setAttribute(\"title\", elem.textContent);\n\t\t} else {\n\t\t\telem.removeAttribute(\"title\");\n\t\t}\n\t};\n\n\tresetChat = () => {\n\t\tthis.context.setItem({});\n\t\tthis.props.actionGenerated(enums.ACTIONS[\"TOGGLE_SIDEBAR\"]);\n\t};\n\n\t/**\n\t * if typing indicator feature is disabled\n\t */\n\tenableTypingIndicator = () => {\n\t\tthis.context.FeatureRestriction.isTypingIndicatorsEnabled()\n\t\t\t.then(response => {\n\t\t\t\tif (response !== this.state.enableTypingIndicator) {\n\t\t\t\t\tthis.setState({enableTypingIndicator: response});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (this.state.enableTypingIndicator !== false) {\n\t\t\t\t\tthis.setState({enableTypingIndicator: false});\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\tenableGroupVoiceCall = () => {};\n\n\tenableGroupVideoCall = () => {\n\t\tthis.context.FeatureRestriction.isGroupVideoCallEnabled()\n\t\t\t.then(response => {\n\t\t\t\t/**\n\t\t\t\t * Don't update state if the response has the same value\n\t\t\t\t */\n\t\t\t\tif (response !== this.state.enableGroupVideoCall) {\n\t\t\t\t\tthis.setState({enableGroupVideoCall: response});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (this.state.enableGroupVideoCall !== false) {\n\t\t\t\t\tthis.setState({enableGroupVideoCall: false});\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\tenableOneOnOneVoiceCall = () => {\n\t\tthis.context.FeatureRestriction.isOneOnOneAudioCallEnabled()\n\t\t\t.then(response => {\n\t\t\t\t/**\n\t\t\t\t * Don't update state if the response has the same value\n\t\t\t\t */\n\t\t\t\tconst combinedResponse = response && !this.context.item.blockedByMe;\n\t\t\t\tif (combinedResponse !== this.state.enableOneOnOneVoiceCall) {\n\t\t\t\t\tthis.setState({enableOneOnOneVoiceCall: combinedResponse});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (this.state.enableOneOnOneVoiceCall !== false) {\n\t\t\t\t\tthis.setState({enableOneOnOneVoiceCall: false});\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\tenableOneOnOneVideoCall = () => {\n\t\tthis.context.FeatureRestriction.isOneOnOneVideoCallEnabled()\n\t\t\t.then(response => {\n\t\t\t\t/**\n\t\t\t\t * Don't update state if the response has the same value\n\t\t\t\t */\n\t\t\t\tconst combinedResponse = response && !this.context.item.blockedByMe;\n\t\t\t\tif (combinedResponse !== this.state.enableOneOnOneVideoCall) {\n\t\t\t\t\tthis.setState({enableOneOnOneVideoCall: combinedResponse});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (this.state.enableOneOnOneVideoCall !== false) {\n\t\t\t\t\tthis.setState({enableOneOnOneVideoCall: false});\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\tenableUserPresence = () => {\n\t\tthis.context.FeatureRestriction.isUserPresenceEnabled()\n\t\t\t.then(response => {\n\t\t\t\tif (response !== this.state.enableUserPresence) {\n\t\t\t\t\tthis.setState({enableUserPresence: response});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (this.state.enableUserPresence !== false) {\n\t\t\t\t\tthis.setState({enableUserPresence: false});\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\tenableAddGroupMembers = () => {\n\t\tthis.context.FeatureRestriction.isAddingGroupMembersEnabled()\n\t\t\t.then(response => {\n\t\t\t\t/**\n\t\t\t\t * Don't update state if the response has the same value\n\t\t\t\t */\n\t\t\t\tif (response !== this.state.enableAddGroupMembers) {\n\t\t\t\t\tthis.setState({enableAddGroupMembers: response});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (this.state.enableAddGroupMembers !== false) {\n\t\t\t\t\tthis.setState({enableAddGroupMembers: false});\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\tenableChangeScope = () => {\n\t\tthis.context.FeatureRestriction.isChangingGroupMemberScopeEnabled()\n\t\t\t.then(response => {\n\t\t\t\t/**\n\t\t\t\t * Don't update state if the response has the same value\n\t\t\t\t */\n\t\t\t\tif (response !== this.state.enableChangeScope) {\n\t\t\t\t\tthis.setState({enableChangeScope: response});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (this.state.enableChangeScope !== false) {\n\t\t\t\t\tthis.setState({enableChangeScope: false});\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\tenableKickGroupMembers = () => {\n\t\tthis.context.FeatureRestriction.isKickingGroupMembersEnabled()\n\t\t\t.then(response => {\n\t\t\t\t/**\n\t\t\t\t * Don't update state if the response has the same value\n\t\t\t\t */\n\t\t\t\tif (response !== this.state.enableKickGroupMembers) {\n\t\t\t\t\tthis.setState({enableKickGroupMembers: response});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (this.state.enableKickGroupMembers !== false) {\n\t\t\t\t\tthis.setState({enableKickGroupMembers: false});\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\tenableBanGroupMembers = () => {\n\t\tthis.context.FeatureRestriction.isBanningGroupMembersEnabled()\n\t\t\t.then(response => {\n\t\t\t\t/**\n\t\t\t\t * Don't update state if the response has the same value\n\t\t\t\t */\n\t\t\t\tif (response !== this.state.enableBanGroupMembers) {\n\t\t\t\t\tthis.setState({enableBanGroupMembers: response});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (this.state.enableBanGroupMembers !== false) {\n\t\t\t\t\tthis.setState({enableBanGroupMembers: false});\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\tenableDeleteGroup = () => {\n\t\tthis.context.FeatureRestriction.isGroupDeletionEnabled()\n\t\t\t.then(response => {\n\t\t\t\t/**\n\t\t\t\t * Don't update state if the response has the same value\n\t\t\t\t */\n\t\t\t\tif (response !== this.state.enableDeleteGroup) {\n\t\t\t\t\tthis.setState({enableDeleteGroup: response});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (this.state.enableDeleteGroup !== false) {\n\t\t\t\t\tthis.setState({enableDeleteGroup: false});\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\tenableViewGroupMembers = () => {\n\t\tthis.context.FeatureRestriction.isViewingGroupMembersEnabled()\n\t\t\t.then(response => {\n\t\t\t\t/**\n\t\t\t\t * Don't update state if the response has the same value\n\t\t\t\t */\n\t\t\t\tif (response !== this.state.enableViewGroupMembers) {\n\t\t\t\t\tthis.setState({enableViewGroupMembers: response});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (this.state.enableViewGroupMembers !== false) {\n\t\t\t\t\tthis.setState({enableViewGroupMembers: false});\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\tenableLeaveGroup = () => {\n\t\tthis.context.FeatureRestriction.isJoinLeaveGroupsEnabled()\n\t\t\t.then(response => {\n\t\t\t\t/**\n\t\t\t\t * Don't update state if the response has the same value\n\t\t\t\t */\n\t\t\t\tif (response !== this.state.enableLeaveGroup) {\n\t\t\t\t\tthis.setState({enableLeaveGroup: response});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (this.state.enableLeaveGroup !== false) {\n\t\t\t\t\tthis.setState({enableLeaveGroup: false});\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\tenableSharedMedia = () => {\n\t\tthis.context.FeatureRestriction.isSharedMediaEnabled()\n\t\t\t.then(response => {\n\t\t\t\t/**\n\t\t\t\t * Don't update state if the response has the same value\n\t\t\t\t */\n\t\t\t\tif (response !== this.state.enableSharedMedia) {\n\t\t\t\t\tthis.setState({enableSharedMedia: response});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (this.state.enableSharedMedia !== false) {\n\t\t\t\t\tthis.setState({enableSharedMedia: false});\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\tenableBlockUser = () => {\n\t\tthis.context.FeatureRestriction.isBlockUserEnabled()\n\t\t\t.then(response => {\n\t\t\t\t/**\n\t\t\t\t * Don't update state if the response has the same value\n\t\t\t\t */\n\t\t\t\tif (response !== this.state.enableBlockUser) {\n\t\t\t\t\tthis.setState({enableBlockUser: response});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (this.state.enableBlockUser !== false) {\n\t\t\t\t\tthis.setState({enableBlockUser: false});\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\trender() {\n\n\t\tlet avatar, presence;\n\t\tlet videoCallClassName = \"option__videocall-user\";\n\t\tlet audioCallClassName = \"option__audiocall-user\";\n\t\tlet viewDetailClassName = \"option__viewdetail-user\";\n\t\tlet chatWithClassName = \"chat__user\";\n\t\tlet chatNameClassName = \"user__name\";\n\t\tlet chatStatusClassName = \"user__status\";\n\n\t\tif (this.context.type === CometChat.ACTION_TYPE.TYPE_USER) {\n\t\t\tavatar = <CometChatAvatar user={this.context.item} />;\n\t\t\tpresence = <CometChatUserPresence status={this.state.presence} borderColor={this.props.theme.borderColor.primary} />;\n\t\t} else if (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP) {\n\t\t\tchatWithClassName = \"chat__group\";\n\t\t\tchatNameClassName = \"group__name\";\n\t\t\tchatStatusClassName = \"group__members\";\n\t\t\tvideoCallClassName = \"option__videocall-group\";\n\t\t\taudioCallClassName = \"option__audiocall-group\";\n\t\t\tviewDetailClassName = \"option__viewdetail-group\";\n\t\t\tavatar = <CometChatAvatar group={this.context.item} />;\n\t\t}\n\n\t\tlet typing = null;\n\t\tif(this.state.typing) {\n\t\t\ttyping = (\n\t\t\t\t<span css={chatStatusStyle(this.state, this.context)} className={chatStatusClassName}>\n\t\t\t\t\t{this.state.typing}\n\t\t\t\t</span>\n\t\t\t);\n\t\t}\n\n\t\tlet status = (\n\t\t\t<span css={chatStatusStyle(this.state, this.context)} className={chatStatusClassName}>\n\t\t\t\t{this.state.status}\n\t\t\t</span>\n\t\t);\n\n\t\tconst audioCallText = Translator.translate(\"AUDIO_CALL\", this.props.lang);\n\t\tlet audioCallBtn = (\n\t\t\t<div className={audioCallClassName} css={chatOptionStyle(audioCallIcon, this.context, 0)} title={audioCallText} onClick={() => this.props.actionGenerated(enums.ACTIONS[\"INITIATE_AUDIO_CALL\"])}>\n\t\t\t\t<i></i>\n\t\t\t</div>\n\t\t);\n\n\t\tif (this.context.checkIfCallIsOngoing()) {\n\t\t\tconst audioCallText = Translator.translate(\"YOU_ALREADY_ONGOING_CALL\", this.props.lang);\n\t\t\taudioCallBtn = (\n\t\t\t\t<div className={audioCallClassName} css={chatOptionStyle(audioCallIcon, this.context, 1)} title={audioCallText}>\n\t\t\t\t\t<i></i>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tconst videoCallText = Translator.translate(\"VIDEO_CALL\", this.props.lang);\n\t\tlet videoCallBtn = (\n\t\t\t<div className={videoCallClassName} css={chatOptionStyle(videoCallIcon, this.context, 0)} title={videoCallText} onClick={() => this.props.actionGenerated(enums.ACTIONS[\"INITIATE_VIDEO_CALL\"])}>\n\t\t\t\t<i></i>\n\t\t\t</div>\n\t\t);\n\n\t\tif (this.context.checkIfCallIsOngoing()) {\n\t\t\tconst videoCallText = Translator.translate(\"YOU_ALREADY_ONGOING_CALL\", this.props.lang);\n\t\t\tvideoCallBtn = (\n\t\t\t\t<div className={videoCallClassName} css={chatOptionStyle(videoCallIcon, this.context, 1)} title={videoCallText}>\n\t\t\t\t\t<i></i>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tconst viewDetailText = Translator.translate(\"VIEW_DETAIL\", this.props.lang);\n\t\tlet viewDetailBtn = (\n\t\t\t<div className={viewDetailClassName} css={chatOptionStyle(detailPaneIcon, this.context, 0)} title={viewDetailText} onClick={() => this.props.actionGenerated(enums.ACTIONS[\"VIEW_DETAIL\"])}>\n\t\t\t\t<i></i>\n\t\t\t</div>\n\t\t);\n\n\t\t/**\n\t\t * If the chat window open is of users and block user and shared media feature is disabled, hide view detail button\n\t\t */\n\t\tif (this.context.type === CometChat.ACTION_TYPE.TYPE_USER) {\n\t\t\tif (this.state.enableBlockUser === false && this.state.enableSharedMedia === false) {\n\t\t\t\tviewDetailBtn = null;\n\t\t\t}\n\t\t} else if (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP) {\n\t\t\t/**\n\t\t\t * If the chat window open is of group\n\t\t\t */\n\t\t\tif (this.context.item?.scope === CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT) {\n\t\t\t\t/**\n\t\t\t\t * If the loggedin user scope is participant, leave group, view group members, and shared media feature is disabled, hide view detail button\n\t\t\t\t */\n\t\t\t\tif (this.state.enableLeaveGroup === false && this.state.enableSharedMedia === false && this.state.enableViewGroupMembers === false) {\n\t\t\t\t\tviewDetailBtn = null;\n\t\t\t\t}\n\t\t\t} else if (this.context.item?.scope === CometChat.GROUP_MEMBER_SCOPE.MODERATOR) {\n\t\t\t\t/**\n\t\t\t\t * If the loggedin user scope is moderator, leave group, view group members, kick & ban group members, changing scope of group members and shared media feature is disabled, hide view detail button\n\t\t\t\t */\n\t\t\t\tif (this.state.enableLeaveGroup === false && this.state.enableSharedMedia === false && this.state.enableViewGroupMembers === false && this.state.enableKickGroupMembers === false && this.state.enableBanGroupMembers === false && this.state.enableChangeScope === false) {\n\t\t\t\t\tviewDetailBtn = null;\n\t\t\t\t}\n\t\t\t} else if (this.context.item?.scope === CometChat.GROUP_MEMBER_SCOPE.ADMIN) {\n\t\t\t\t/**\n\t\t\t\t * If the loggedin user scope is admin, add group members, view group members, kick & ban group members, changing scope of group members, leave and delete group and shared media feature is disabled, hide view detail button\n\t\t\t\t */\n\t\t\t\tif (\n\t\t\t\t\tthis.state.enableLeaveGroup === false &&\n\t\t\t\t\tthis.state.enableSharedMedia === false &&\n\t\t\t\t\tthis.state.enableViewGroupMembers === false &&\n\t\t\t\t\tthis.state.enableKickGroupMembers === false &&\n\t\t\t\t\tthis.state.enableBanGroupMembers === false &&\n\t\t\t\t\tthis.state.enableChangeScope === false &&\n\t\t\t\t\tthis.state.enableDeleteGroup === false &&\n\t\t\t\t\tthis.state.enableAddGroupMembers === false\n\t\t\t\t) {\n\t\t\t\t\tviewDetailBtn = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//if audiocall feature is disabled\n\t\tif ((this.context.type === CometChat.ACTION_TYPE.TYPE_USER && this.state.enableOneOnOneVoiceCall === false) || (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP && this.state.enableGroupVoiceCall === false)) {\n\t\t\taudioCallBtn = null;\n\t\t}\n\n\t\t//if videocall feature is disabled\n\t\tif ((this.context.type === CometChat.ACTION_TYPE.TYPE_USER && this.state.enableOneOnOneVideoCall === false) || (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP && this.state.enableGroupVideoCall === false)) {\n\t\t\tvideoCallBtn = null;\n\t\t}\n\n\t\t//if user presence is disabled in chat widget\n\t\tif (this.state.enableUserPresence === false && this.context.type === CometChat.ACTION_TYPE.TYPE_USER) {\n\t\t\tstatus = null;\n\t\t}\n\n\t\treturn (\n\t\t\t<div css={chatHeaderStyle(this.context)} className=\"chat__header\">\n\t\t\t\t<div css={chatDetailStyle()} className=\"chat__details\">\n\t\t\t\t\t<div css={chatSideBarBtnStyle(menuIcon, this.props, this.context)} className=\"chat__sidebar-menu\" onClick={this.resetChat}></div>\n\t\t\t\t\t<div css={chatThumbnailStyle()} className=\"chat__thumbnail\">\n\t\t\t\t\t\t{avatar}\n\t\t\t\t\t\t{presence}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div css={chatUserStyle(this.context)} className={chatWithClassName}>\n\t\t\t\t\t\t<h6 css={chatNameStyle()} className={chatNameClassName} onMouseEnter={event => this.toggleTooltip(event, true)} onMouseLeave={event => this.toggleTooltip(event, false)}>\n\t\t\t\t\t\t\t{this.context.item.name}\n\t\t\t\t\t\t</h6>\n\t\t\t\t\t\t{typing ? typing : status}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div css={chatOptionWrapStyle()} className=\"chat__options\">\n\t\t\t\t\t{videoCallBtn}\n\t\t\t\t\t{audioCallBtn}\n\t\t\t\t\t{viewDetailBtn}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n// Specifies the default values for props:\nCometChatMessageHeader.defaultProps = {\n  lang: Translator.getDefaultLanguage(),\n  theme: theme,\n  item: {},\n  type: \"\"\n};\n\nCometChatMessageHeader.propTypes = {\n  lang: PropTypes.string,\n  theme: PropTypes.object,\n  item: PropTypes.object,\n  type: PropTypes.string\n}\n\nexport { CometChatMessageHeader };"]},"metadata":{},"sourceType":"module"}